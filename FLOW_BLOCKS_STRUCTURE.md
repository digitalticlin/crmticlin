ACIDIONAR OS SEGUINTES BLOCOS
- Enviar LINK (espa√ßo descri√ß√£o, link formatado e mensagem)
- Enviar Midia (Foto ou Video) (Esp√ßo para descri√ß√£o e mensagem)

---

## ‚úÖ **1. APRESENTA√á√ÉO INICIAL** üëã (N√ÉO TER INPUT NESTE NODE, APENAS OUTPUT)
**Status:** ‚úÖ Implementado (precisa atualizar)

**Categoria:** Especial

**Fun√ß√£o:** Primeira mensagem que a IA envia ao cliente

**Campos do Editor:**
1. **Nome do passo** (organizacional)
   - Input curto
   - Placeholder: "Ex: Boas-vindas, Cumprimento inicial..."
   - Dica: "üí° Nome interno para voc√™ se organizar, o cliente n√£o ver√°"

2. **O que deve acontecer nesta etapa?** (NOVO!)
   - Textarea (3-4 linhas)
   - Label: "üìã O que deve acontecer nesta etapa?"
   - Placeholder: "Nesta etapa voc√™ ir√° se apresentar ao cliente e capturar o nome dele para personalizar a conversa."
   - Dica: "üí° A IA usar√° isso como contexto para executar melhor"

3. **Mensagem de apresenta√ß√£o**
   - Textarea grande
   - Dica vis√≠vel: "Use {nome_agente} e {empresa} para personalizar"
   - Placeholder: "Oi! Sou {nome_agente} da {empresa}. Estou aqui para te ajudar!"

4. **Switch:** Perguntar o nome do cliente?
   - Se SIM: Adiciona "Qual o seu nome?" automaticamente ao final
   - Se N√ÉO: Apenas envia a apresenta√ß√£o
   - Padr√£o: SIM (recomendado)

5. **Preview da mensagem** (estilo WhatsApp)
6. **JSON t√©cnico** (colapsado)

**Pr√≥ximo Passo:**
- Sempre vai para o pr√≥ximo bloco conectado

**Observa√ß√µes:**
- Bloco especial destacado na paleta
- Auto-adicionado ao criar novo fluxo
- N√£o tem bifurca√ß√µes (sa√≠da √∫nica)
- {nome_agente} e {empresa} s√£o substitu√≠dos por valores da configura√ß√£o do agente

---

## ‚úÖ **2. FAZER PERGUNTA** üí¨
**Status:** ‚úÖ Implementado (precisa atualizar)

**Categoria:** Comunica√ß√£o

**Fun√ß√£o:** Fazer uma pergunta ao cliente e ramificar baseado na resposta

**Campos do Editor:**
1. **Nome do passo**
   - Input curto
   - Placeholder: "Ex: Perguntar se tem documento, Confirmar interesse..."
   - Dica: "üí° D√™ um nome que facilite identificar no fluxo"

2. **O que deve acontecer nesta etapa?** (NOVO!)
   - Textarea (3-4 linhas)
   - Label: "üìã O que deve acontecer nesta etapa?"
   - Placeholder: "Nesta etapa voc√™ ir√° perguntar se o cliente j√° possui o extrato banc√°rio para decidir o pr√≥ximo passo."
   - Dica: "üí° A IA usar√° isso como contexto para executar melhor"

3. **Pergunta principal**
   - Textarea
   - Label: "‚ùì O que voc√™ quer perguntar ao cliente?"
   - Placeholder: "Ex: Voc√™ j√° tem o extrato banc√°rio dos √∫ltimos 3 meses?"
   - Dica: "üí° Seja claro e objetivo. O cliente vai receber exatamente essa mensagem."

4. **Switch:** Verificar se j√° perguntou antes?
   - Se SIM: Campo para informar qual vari√°vel verificar
     - Placeholder: "Ex: tem_extrato, respondeu_interesse"
     - Dica: "Se esta informa√ß√£o j√° existir, a IA pula esta pergunta automaticamente"

5. **Op√ß√µes de Resposta** (lista din√¢mica - adicionar/remover)
   - Bot√£o: "+ Adicionar op√ß√£o"
   - Para cada op√ß√£o:
     - **SE o cliente responder:** (input)
       - Placeholder: 'Ex: "sim", "j√° tenho", "tenho sim"'
       - Dica: "üí° Palavras-chave que indicam esta resposta (separe com v√≠rgulas)"
     - **ENT√ÉO ir para qual passo:** (ser√° preenchido ao conectar)
       - Placeholder: "Conecte os blocos no canvas"
       - Dica: "üìå Voc√™ pode conectar manualmente no canvas depois"
     - **Guardar resposta em:** (opcional)
       - Placeholder: "Ex: tem_extrato, cpf_cliente, nome_produto"
       - Dica: "Use isso para salvar a resposta e reutilizar depois"

6. **Preview da mensagem** (estilo WhatsApp)
7. **JSON t√©cnico** (colapsado)

**Pr√≥ximo Passo:**
- M√∫ltiplas sa√≠das baseadas nas respostas

**Observa√ß√µes:**
- M√≠nimo 1 op√ß√£o de resposta
- Cliente pode responder de forma livre, IA identifica palavras-chave
- Valida√ß√£o: n√£o permite salvar sem pergunta e sem op√ß√µes

---

## üì§ **3. SOLICITAR DOCUMENTO** üìÑ
**Status:** ‚è≥ Pendente

**Categoria:** Comunica√ß√£o

**Fun√ß√£o:** Pedir um arquivo/documento ao cliente e aguardar envio

**Campos do Editor:**
1. **Nome do passo**
   - Placeholder: "Ex: Pedir extrato, Solicitar RG..."

2. **O que deve acontecer nesta etapa?**
   - Textarea (3-4 linhas)
   - Placeholder: "Nesta etapa voc√™ ir√° solicitar o envio do extrato banc√°rio dos √∫ltimos 3 meses em PDF ou foto."

3. **Qual documento pedir?**
   - Input
   - Placeholder: "Ex: extrato banc√°rio, RG, comprovante de resid√™ncia"
   - Dica: "üí° Seja espec√≠fico sobre o documento"

4. **Mensagem de solicita√ß√£o**
   - Textarea
   - Placeholder: "Por favor, envie seu {documento}. Pode ser foto ou PDF."
   - Dica: "Use {documento} para inserir o nome do documento automaticamente"

5. **Switch:** Verificar se j√° enviou antes?
   - Se SIM: Campo para vari√°vel
     - Placeholder: "Ex: enviou_extrato, tem_documento_rg"

6. **Tempo m√°ximo de espera**
   - Dropdown: 5 min, 30 min, 1 hora, 6 horas, 1 dia, Sem limite
   - Padr√£o: 30 minutos

7. **O que fazer SE:**
   - Cliente enviar o documento ‚Üí ir para passo X
   - Cliente N√ÉO enviar (timeout) ‚Üí ir para passo Y

8. **Guardar arquivo em:**
   - Input para nome da vari√°vel
   - Placeholder: "Ex: arquivo_extrato, documento_rg"

9. **Preview da mensagem**
10. **JSON t√©cnico** (colapsado)

**Pr√≥ximo Passo:**
- 2 sa√≠das: documento recebido / timeout

**Observa√ß√µes:**
- Aceita qualquer tipo de arquivo por padr√£o
- Valida√ß√£o de tipo pode ser feita no pr√≥ximo bloco (Validar Documento)

---

## üì§ **4. ENVIAR MENSAGEM** üì§
**Status:** ‚è≥ Pendente

**Categoria:** Comunica√ß√£o

**Fun√ß√£o:** Enviar uma mensagem informativa sem aguardar resposta espec√≠fica

**Campos do Editor:**
1. **Nome do passo**
   - Placeholder: "Ex: Confirmar recebimento, Avisar processamento..."

2. **O que deve acontecer nesta etapa?**
   - Textarea (3-4 linhas)
   - Placeholder: "Nesta etapa voc√™ ir√° confirmar o recebimento do documento e avisar que est√° processando."

3. **Mensagem a enviar**
   - Textarea grande
   - Placeholder: "Ex: √ìtimo! Recebi seu documento. Vou analisar e j√° te retorno."
   - Dica: "üí° Esta √© uma mensagem informativa"

5. **Ap√≥s enviar, ir automaticamente para:**
   - Pr√≥ximo passo conectado (sa√≠da √∫nica)

6. **Preview da mensagem**
7. **JSON t√©cnico** (colapsado)

**Pr√≥ximo Passo:**
- Sa√≠da √∫nica (n√£o h√° bifurca√ß√£o)

**Observa√ß√µes:**
- Use para confirma√ß√µes, avisos, informa√ß√µes
- N√£o espera resposta espec√≠fica (diferente de "Fazer Pergunta")
- Continua automaticamente ap√≥s enviar

---

## üéì **5. ENSINAR/ORIENTAR** üéì
**Status:** ‚è≥ Pendente

**Categoria:** Comunica√ß√£o

**Fun√ß√£o:** Dar instru√ß√µes, tutorial ou orienta√ß√µes ao cliente

**Campos do Editor:**
1. **Nome do passo**
   - Placeholder: "Ex: Ensinar a tirar extrato, Orientar sobre documentos..."

2. **O que deve acontecer nesta etapa?**
   - Textarea (3-4 linhas)
   - Placeholder: "Nesta etapa voc√™ ir√° ensinar o cliente como conseguir o extrato banc√°rio pelo app do banco."

3. **T√≠tulo da instru√ß√£o**
   - Input
   - Placeholder: "Ex: Como conseguir seu extrato banc√°rio"

4. **Tipo de instru√ß√£o:**
   - Radio buttons:
     - [ ] Passo a passo (com numera√ß√£o autom√°tica)
     - [ ] Dica/Sugest√£o (texto livre)
     - [ ] Lista de orienta√ß√µes

5. **Mensagem com as instru√ß√µes**
   - Textarea grande (6-8 linhas)
   - Placeholder (se passo a passo):
     ```
     Abra o app do seu banco
     V√° em "Extratos"
     Selecione "√öltimos 3 meses"
     Clique em "Baixar PDF"
     ```
   - Dica: "Se escolheu 'Passo a passo', escreva um item por linha (numera√ß√£o autom√°tica)"


7. **Ap√≥s enviar, ir para:**
   - Pr√≥ximo passo conectado

8. **Preview da mensagem**
9. **JSON t√©cnico** (colapsado)

**Pr√≥ximo Passo:**
- Sa√≠da √∫nica

**Observa√ß√µes:**
- Bom para reduzir transfer√™ncias para humanos
- Cliente pode consultar depois
- Formato passo a passo numera automaticamente

---

## üîç **6. VALIDAR DOCUMENTO** üîç
**Status:** ‚è≥ Pendente

**Categoria:** L√≥gica

**Fun√ß√£o:** Verificar se o documento enviado est√° correto/v√°lido

**Campos do Editor:**
1. **Nome do passo**
   - Placeholder: "Ex: Validar extrato, Verificar RG..."

2. **O que deve acontecer nesta etapa?**
   - Textarea (3-4 linhas)
   - Placeholder: "Nesta etapa voc√™ ir√° verificar se o arquivo enviado √© um PDF v√°lido e cont√©m informa√ß√µes banc√°rias."

3. **Qual documento validar?**
   - Dropdown com vari√°veis de arquivos recebidos
   - Exemplo: {arquivo_extrato}, {documento_rg}

4. **O que verificar:**
   - Checkboxes (m√∫ltiplos):
     - [ ] Tipo de arquivo
       - Se marcado: Multi-select (PDF, JPG, PNG, DOC, etc)
     - [ ] Tamanho m√°ximo
       - Se marcado: Campo num√©rico (MB)
       - Placeholder: "Ex: 10"
     - [ ] Conte√∫do espec√≠fico (OCR/IA - avan√ßado)
       - Se marcado: Campo de texto
       - Placeholder: "Ex: verificar se cont√©m CPF, verificar se √© extrato banc√°rio"

5. **O que fazer SE:**
   - Documento v√°lido ‚Üí ir para passo X
   - Documento inv√°lido ‚Üí ir para passo Y

6. **Mensagem de erro personalizada**
   - Textarea
   - Placeholder: "O documento enviado n√£o √© v√°lido. Por favor, envie um PDF ou imagem do seu extrato banc√°rio."

7. **Preview da l√≥gica de valida√ß√£o**
8. **JSON t√©cnico** (colapsado)

**Pr√≥ximo Passo:**
- 2 sa√≠das: v√°lido / inv√°lido

**Observa√ß√µes:**
- Valida√ß√£o de conte√∫do (OCR) requer integra√ß√£o futura
- Por enquanto: tipo e tamanho funcionam
- Mensagem de erro √© enviada automaticamente se inv√°lido

---

## üîÄ **7. DECIS√ÉO (SE/ENT√ÉO)** üîÄ
**Status:** ‚è≥ Pendente

**Categoria:** L√≥gica

**Fun√ß√£o:** Tomar decis√£o autom√°tica baseada em dados/vari√°veis (SEM perguntar ao cliente)

**Campos do Editor:**
1. **Nome do passo**
   - Placeholder: "Ex: Verificar cidade, Checar valor compra..."

2. **O que deve acontecer nesta etapa?**
   - Textarea (3-4 linhas)
   - Placeholder: "Nesta etapa voc√™ ir√° decidir o caminho baseado no valor da compra do cliente (maior ou menor que R$ 1000)."

3. **Adicionar condi√ß√µes** (lista din√¢mica - adicionar/remover)
   - Bot√£o: "+ Adicionar condi√ß√£o"
   - Para cada condi√ß√£o:
     - **SE:** [Campo/Vari√°vel] [Operador] [Valor]
       - Campo 1: Input ou Dropdown de vari√°veis
         - Placeholder: "Ex: lead.cidade, valor_compra, interesse"
       - Campo 2: Dropdown de operadores:
         - igual a (==)
         - diferente de (!=)
         - cont√©m
         - n√£o cont√©m
         - maior que (>)
         - menor que (<)
         - maior ou igual (>=)
         - menor ou igual (<=)
         - est√° vazio
         - n√£o est√° vazio
       - Campo 3: Input de valor
         - Placeholder: "Ex: S√£o Paulo, 1000, alto"
     - **ENT√ÉO:** ir para passo X (conectar no canvas)

4. **Fallback (se nenhuma condi√ß√£o for verdadeira):**
   - Obrigat√≥rio
   - Ir para passo: (conectar no canvas)
   - Dica: "‚ö†Ô∏è Sempre defina um caminho padr√£o"

5. **Preview da l√≥gica** (diagrama visual em texto)
   - Exemplo:
     ```
     SE lead.cidade == "S√£o Paulo" ‚Üí PASSO B
     SE valor_compra > 1000 ‚Üí PASSO C
     SEN√ÉO ‚Üí PASSO D (fallback)
     ```

6. **JSON t√©cnico** (colapsado)

**Pr√≥ximo Passo:**
- M√∫ltiplas sa√≠das (uma por condi√ß√£o + fallback)

**Observa√ß√µes:**
- N√ÉO faz perguntas, apenas decide
- Diferente de "Fazer Pergunta" que espera resposta do cliente
- √ötil para segmenta√ß√£o autom√°tica
- Avalia√ß√£o em ordem (primeira condi√ß√£o verdadeira ganha)

---

## üîç **8. VERIFICAR SE J√Å FEZ** üîç
**Status:** ‚è≥ Pendente

**Categoria:** L√≥gica

**Fun√ß√£o:** Evitar repetir a√ß√µes j√° feitas (anti-loop inteligente)

**Campos do Editor:**
1. **Nome do passo**
   - Placeholder: "Ex: Verificar se enviou doc, Checar se respondeu..."

2. **O que deve acontecer nesta etapa?**
   - Textarea (3-4 linhas)
   - Placeholder: "Nesta etapa voc√™ ir√° verificar se o cliente j√° enviou o documento anteriormente para n√£o pedir novamente."

3. **O que verificar se j√° foi feito?**
   - Textarea (descri√ß√£o em texto livre)
   - Placeholder: "Ex: verificar se j√° enviou documento, verificar se j√° respondeu sobre interesse"

4. **Campo/vari√°vel a verificar**
   - Input ou Dropdown de vari√°veis
   - Placeholder: "Ex: enviou_extrato, respondeu_pergunta_1"

5. **O que fazer SE:**
   - J√° fez ‚Üí ir para passo X (pular etapa)
   - Ainda n√£o fez ‚Üí ir para passo Y (executar normalmente)

6. **Preview da l√≥gica**
7. **JSON t√©cnico** (colapsado)

**Pr√≥ximo Passo:**
- 2 sa√≠das: j√° fez / n√£o fez

**Observa√ß√µes:**
- Melhora experi√™ncia do usu√°rio
- Evita perguntar 2 vezes a mesma coisa
- Diferente de valida√ß√£o no bloco "Fazer Pergunta"
- √ötil em fluxos com loops

---

## üîÅ **9. REPETIR COM VARIA√á√ÉO** üîÅ
**Status:** ‚è≥ Pendente

**Categoria:** L√≥gica

**Fun√ß√£o:** Voltar para um passo anterior com mensagem diferente (mais insistente)

**Campos do Editor:**
1. **Nome do passo**
   - Placeholder: "Ex: Insistir no documento, Lembrar pergunta..."

2. **O que deve acontecer nesta etapa?**
   - Textarea (3-4 linhas)
   - Placeholder: "Nesta etapa voc√™ ir√° pedir o documento novamente com uma mensagem mais insistente, pois ele n√£o respondeu."

3. **Qual passo repetir?**
   - Dropdown com lista de passos anteriores no fluxo
   - Ou: Campo para nome/ID do passo

4. **Quantas tentativas permitir?**
   - Number input (1-5)
   - Padr√£o: 3
   - Dica: "N√∫mero m√°ximo de vezes que tentar√°"

5. **Mensagens por tentativa**
   - Campo din√¢mico baseado no n√∫mero de tentativas
   - Para cada tentativa:
     - **Tentativa {N}:**
       - Textarea
       - Placeholder (varia por N):
         - Tentativa 2: "Ainda n√£o recebi sua resposta. Voc√™ poderia confirmar?"
         - Tentativa 3: "√öltima tentativa! Preciso dessa informa√ß√£o para continuar."
   - Dica: "Primeira tentativa usa a mensagem original"

6. **Ap√≥s esgotar tentativas:**
   - Obrigat√≥rio
   - Ir para passo: (conectar no canvas)
   - Dica: "Ex: Transferir para humano ou Finalizar"

7. **Preview das varia√ß√µes**
8. **JSON t√©cnico** (colapsado)

**Pr√≥ximo Passo:**
- 1 sa√≠da ap√≥s esgotar tentativas

**Observa√ß√µes:**
- Cria um loop controlado
- √ötil quando cliente n√£o responde
- Evita loop infinito com limite de tentativas
- Mensagens ficam progressivamente mais insistentes

---

## üìù **10. ATUALIZAR DADOS DO LEAD** üìù
**Status:** ‚è≥ Pendente

**Categoria:** CRM

**Fun√ß√£o:** Salvar/atualizar informa√ß√µes do lead no CRM

**Campos do Editor:**
1. **Nome do passo**
   - Placeholder: "Ex: Salvar dados cliente, Atualizar interesse..."

2. **O que deve acontecer nesta etapa?**
   - Textarea (3-4 linhas)
   - Placeholder: "Nesta etapa voc√™ ir√° salvar o nome, telefone e interesse do cliente no CRM."

3. **Quais dados atualizar?**
   - Lista din√¢mica (adicionar/remover campos)
   - Bot√£o: "+ Adicionar campo"
   - Para cada campo:
     - **Campo:** Dropdown com campos do CRM
       - Nome
       - Email
       - Telefone
       - Empresa
       - Cargo
       - Cidade
       - Estado
       - Interesse
       - Observa√ß√µes
       - Custom (campo livre)
     - **Valor:** De onde vem?
       - Radio buttons:
         - [ ] Resposta do cliente (selecionar vari√°vel)
           - Dropdown de vari√°veis capturadas
         - [ ] Valor fixo (campo de texto)
           - Input livre
         - [ ] Data/hora atual
   - Exemplo visual:
     ```
     Campo: Nome ‚Üí Vari√°vel: {nome_capturado}
     Campo: Interesse ‚Üí Valor fixo: "Alto"
     Campo: Data_contato ‚Üí Data/hora atual
     ```

4. **Ap√≥s atualizar:**
   - Ir para passo: (pr√≥ximo conectado)

5. **Preview dos dados que ser√£o salvos**
   - Tabela mostrando Campo ‚Üí Valor
6. **JSON t√©cnico** (colapsado)

**Pr√≥ximo Passo:**
- Sa√≠da √∫nica

**Observa√ß√µes:**
- Integra√ß√£o com tabela leads do Supabase
- Pode atualizar m√∫ltiplos campos de uma vez
- Valida√ß√£o: n√£o permite campo vazio
- Sobrescreve valores existentes

---

## üéØ **11. MOVER LEAD NO FUNIL** üéØ
**Status:** ‚è≥ Pendente

**Categoria:** CRM

**Fun√ß√£o:** Mudar o lead de etapa no funil de vendas

**Campos do Editor:**
1. **Nome do passo**
   - Placeholder: "Ex: Qualificar lead, Mover para negocia√ß√£o..."

2. **O que deve acontecer nesta etapa?**
   - Textarea (3-4 linhas)
   - Placeholder: "Nesta etapa voc√™ ir√° mover o lead para a etapa 'Qualifica√ß√£o' do funil de vendas."

3. **Para qual etapa mover?**
   - Dropdown 1: Selecionar funil
     - Busca funis do usu√°rio no banco
   - Dropdown 2: Selecionar etapa
     - Carrega etapas do funil selecionado
   - Exemplo: "Funil de Vendas > Qualifica√ß√£o"

4. **Condi√ß√£o para mover:**
   - Radio buttons:
     - [ ] Sempre mover (incondicional)
     - [ ] Mover SE [condi√ß√£o]
       - Campo de condi√ß√£o (similar ao bloco Decis√£o)
       - Exemplo: "SE interesse == 'alto'"
       - Operadores: ==, !=, cont√©m, >, <

5. **Switch:** Notificar equipe?
   - Se SIM: Notifica√ß√£o enviada aos respons√°veis da etapa
   - Padr√£o: SIM

6. **Ap√≥s mover:**
   - Ir para passo: (pr√≥ximo conectado)

7. **Preview da a√ß√£o**
8. **JSON t√©cnico** (colapsado)

**Pr√≥ximo Passo:**
- Sa√≠da √∫nica

**Observa√ß√µes:**
- Integra√ß√£o com tabela sales_funnels do Supabase
- Automa√ß√£o de gest√£o de pipeline
- Pode criar automa√ß√µes condicionais
- Lead √© movido mesmo se conversa continuar

---

## ‚è≥ **12. AGUARDAR A√á√ÉO** ‚è≥
**Status:** ‚è≥ Pendente

**Categoria:** Controle

**Fun√ß√£o:** Pausar o fluxo e aguardar algo acontecer

**Campos do Editor:**
1. **Nome do passo**
   - Placeholder: "Ex: Aguardar resposta, Esperar arquivo..."

2. **O que deve acontecer nesta etapa?**
   - Textarea (3-4 linhas)
   - Placeholder: "Nesta etapa voc√™ ir√° aguardar at√© 30 minutos pela resposta do cliente antes de enviar um lembrete."

3. **Aguardar o qu√™?**
   - Radio buttons:
     - [ ] Resposta do cliente (qualquer mensagem)
     - [ ] Arquivo/documento (qualquer arquivo)
     - [ ] Tempo espec√≠fico (delay)
       - Se escolher tempo:
         - Campo num√©rico + Dropdown (minutos/horas/dias)
         - Placeholder: "Ex: Aguardar 1 hora"

4. **Tempo m√°ximo de espera**
   - Campo num√©rico + Dropdown (min/hora/dia)
   - Placeholder: "Ex: 30 minutos, 2 horas, 1 dia"
   - Dica: "Ap√≥s esse tempo, considera timeout"

5. **O que fazer SE:**
   - Cliente responder/agir ‚Üí ir para passo X
   - N√£o responder (timeout) ‚Üí ir para passo Y

6. **Switch:** Enviar lembrete?
   - Se SIM:
     - **Ap√≥s quanto tempo?**
       - Campo num√©rico + Dropdown
       - Placeholder: "Ex: 15 minutos"
     - **Mensagem do lembrete**
       - Textarea
       - Placeholder: "Oi! Voc√™ ainda est√° a√≠? Estou aguardando sua resposta."
     - **Quantos lembretes?**
       - Number (1-3)
       - Padr√£o: 1

7. **Preview**
8. **JSON t√©cnico** (colapsado)

**Pr√≥ximo Passo:**
- 2 sa√≠das: respondeu / timeout

**Observa√ß√µes:**
- √ötil para dar tempo ao cliente
- Pode enviar m√∫ltiplos lembretes
- N√£o bloqueia outros leads
- Se escolher "tempo espec√≠fico", aguarda e continua automaticamente

---

## üìû **13. ENCAMINHAR PARA HUMANO** üìû
**Status:** ‚è≥ Pendente

**Categoria:** Controle

**Fun√ß√£o:** Transferir a conversa para um atendente humano

**Campos do Editor:**
1. **Nome do passo**
   - Placeholder: "Ex: Transferir vendas, Encaminhar suporte..."

2. **O que deve acontecer nesta etapa?**
   - Textarea (3-4 linhas)
   - Placeholder: "Nesta etapa voc√™ ir√° transferir o atendimento para um vendedor humano porque o cliente quer negociar valores."

3. **Motivo do encaminhamento** (interno)
   - Textarea
   - Placeholder: "Ex: Cliente quer negociar valores, D√∫vida t√©cnica avan√ßada, Solicita√ß√£o de cancelamento"
   - Dica: "Apenas para organiza√ß√£o interna, cliente n√£o v√™"

4. **Mensagem para o cliente**
   - Textarea
   - Placeholder: "Vou te transferir para um dos nossos especialistas. Aguarde um momento!"
   - Dica: "O que a IA dir√° antes de transferir"

5. **Para qual departamento/setor?**
   - Radio buttons:
     - [ ] Vendas
     - [ ] Suporte
     - [ ] Financeiro
     - [ ] T√©cnico
     - [ ] Qualquer atendente dispon√≠vel
     - [ ] Espec√≠fico (selecionar usu√°rio)
       - Se escolher: Dropdown com usu√°rios do sistema

6. **Switch:** Enviar resumo da conversa?
   - Se SIM: Atendente recebe hist√≥rico completo da conversa
   - Padr√£o: SIM (recomendado)

7. **Este √© o passo final?**
   - Radio buttons:
     - [ ] Sim - Encerra fluxo da IA (recomendado)
     - [ ] N√£o - IA pode retomar depois (avan√ßado)
   - Padr√£o: SIM

8. **Preview da mensagem**
9. **JSON t√©cnico** (colapsado)

**Pr√≥ximo Passo:**
- Geralmente √© terminal (fim do fluxo)
- Pode ter sa√≠da opcional se configurado para retornar

**Observa√ß√µes:**
- Integra√ß√£o com sistema de atendentes
- Notifica atendente dispon√≠vel
- Lead fica aguardando na fila
- Se ningu√©m dispon√≠vel, pode enviar mensagem autom√°tica

---

## ‚úÖ **14. FINALIZAR CONVERSA** ‚úÖ
**Status:** ‚è≥ Pendente

**Categoria:** Controle

**Fun√ß√£o:** Encerrar o fluxo conversacional

**Campos do Editor:**
1. **Nome do passo**
   - Placeholder: "Ex: Despedida, Encerramento..."

2. **O que deve acontecer nesta etapa?**
   - Textarea (3-4 linhas)
   - Placeholder: "Nesta etapa voc√™ ir√° agradecer o atendimento e se despedir do cliente."

3. **Mensagem de despedida**
   - Textarea
   - Placeholder: "Foi um prazer te atender! Se precisar, estou sempre por aqui. At√© logo! üëã"
   - Dica: "√öltima mensagem que o cliente ver√°"

4. **Motivo do encerramento** (interno)
   - Dropdown:
     - Sucesso (objetivo alcan√ßado)
     - Abandono (cliente parou de responder)
     - Transferido para humano
     - Cliente solicitou encerramento
     - Outro (campo livre)

5. **A√ß√µes finais:**
   - Checkboxes (m√∫ltiplos):
     - [ ] Enviar pesquisa de satisfa√ß√£o?
       - Se SIM:
         - **Texto da pesquisa:**
           - Textarea
           - Placeholder: "Como voc√™ avalia nosso atendimento?"
         - **Tipo:**
           - Radio: Estrelas (1-5), Nota (0-10), Sim/N√£o
     - [ ] Marcar como conclu√≠do no CRM
       - Sempre executa
     - [ ] Agendar follow-up
       - Se SIM:
         - **Quando?**
           - Campo: n√∫mero + dropdown (horas/dias)
           - Placeholder: "Ex: Enviar mensagem ap√≥s 3 dias"
         - **Mensagem do follow-up:**
           - Textarea
           - Placeholder: "Oi! Como voc√™ est√°? Conseguiu resolver tudo?"

6. **Preview da mensagem**
7. **JSON t√©cnico** (colapsado)

**Pr√≥ximo Passo:**
- Nenhum (bloco terminal)

**Observa√ß√µes:**
- Sempre marca conversa como encerrada
- Pode reabrir se cliente enviar nova mensagem
- Estat√≠sticas de convers√£o s√£o calculadas aqui
- Follow-up cria novo fluxo autom√°tico depois

---

## üìã **RESUMO GERAL**

### ‚úÖ **Implementados (2/14):**
1. Apresenta√ß√£o Inicial (precisa atualizar)
2. Fazer Pergunta (precisa atualizar)

### ‚è≥ **Pendentes (12/14):**
3. Solicitar Documento
4. Enviar Mensagem
5. Ensinar/Orientar
6. Validar Documento
7. Decis√£o (SE/ENT√ÉO)
8. Verificar Se J√° Fez
9. Repetir com Varia√ß√£o
10. Atualizar Dados do Lead
11. Mover Lead no Funil
12. Aguardar A√ß√£o
13. Encaminhar para Humano
14. Finalizar Conversa

---

## üé® **PADR√ÉO DE TODOS OS EDITORES:**

### **Estrutura Fixa:**
1. ‚úÖ Header com √≠cone grande colorido + t√≠tulo + descri√ß√£o
2. ‚úÖ **Nome do passo** (organizacional) - sempre primeiro campo
3. ‚úÖ **"üìã O que deve acontecer nesta etapa?"** (contexto para IA) - sempre segundo campo
4. ‚úÖ Campos espec√≠ficos do tipo (com emojis e linguagem simples)
5. ‚úÖ Decis√µes/pr√≥ximos passos quando aplic√°vel
6. ‚úÖ Preview visual (como cliente v√™) - estilo WhatsApp
7. ‚úÖ JSON t√©cnico (colapsado, para debug)
8. ‚úÖ Bot√µes: "‚ùå Cancelar" e "‚úÖ Salvar [Nome do Bloco]"

### **Cores por Categoria:**
- üü° **Especial:** Gradiente amarelo-laranja (Apresenta√ß√£o)
- üîµ **Comunica√ß√£o:** Azul/√çndigo
- üü£ **L√≥gica:** Roxo/Amarelo
- üü¢ **CRM:** Verde/Ciano
- üü† **Controle:** Laranja/Cinza

---

## üìù **INSTRU√á√ïES PARA IMPLEMENTA√á√ÉO:**

**O que j√° temos:**
- ‚úÖ Estrutura base dos editores (PresentationEditor, AskQuestionEditor)
- ‚úÖ Sistema de preview estilo WhatsApp
- ‚úÖ JSON colaps√°vel
- ‚úÖ Valida√ß√µes b√°sicas

**O que falta fazer:**
- ‚è≥ Adicionar campo "Descri√ß√£o" nos 2 editores existentes
- ‚è≥ Criar os 12 editores restantes
- ‚è≥ Integrar todos no FlowBuilderTest.tsx
- ‚è≥ Estilizar handles coloridos por tipo de sa√≠da

**Prioridade de implementa√ß√£o sugerida:**
1. Atualizar Apresenta√ß√£o Inicial e Fazer Pergunta (adicionar descri√ß√£o)
2. Enviar Mensagem (mais simples)
3. Solicitar Documento
4. Decis√£o (SE/ENT√ÉO)
5. Aguardar A√ß√£o
6. Finalizar Conversa
7. Encaminhar para Humano
8. Ensinar/Orientar
9. Validar Documento
10. Atualizar Dados do Lead
11. Mover Lead no Funil
12. Verificar Se J√° Fez
13. Repetir com Varia√ß√£o

---

**Estrutura pronta para implementa√ß√£o! üöÄ**
