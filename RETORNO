[
  {
    "resource_type": "TABLE",
    "schemaname": "public",
    "resource_name": "broadcast_campaigns",
    "owner": "postgres"
  },
  {
    "resource_type": "TABLE",
    "schemaname": "public",
    "resource_name": "broadcast_history",
    "owner": "postgres"
  },
  {
    "resource_type": "TABLE",
    "schemaname": "public",
    "resource_name": "broadcast_queue",
    "owner": "postgres"
  },
  {
    "resource_type": "TABLE",
    "schemaname": "public",
    "resource_name": "broadcast_rate_limits",
    "owner": "postgres"
  }
]


COMANDO 2 SEM RETORNO

[
  {
    "resource_type": "FUNCTION",
    "schema": "pg_catalog",
    "resource_name": "broadcast",
    "arguments": "inet",
    "definition": "CREATE OR REPLACE FUNCTION pg_catalog.broadcast(inet)\n RETURNS inet\n LANGUAGE internal\n IMMUTABLE PARALLEL SAFE STRICT\nAS $function$network_broadcast$function$\n"
  },
  {
    "resource_type": "FUNCTION",
    "schema": "realtime",
    "resource_name": "broadcast_changes",
    "arguments": "topic_name text, event_name text, operation text, table_name text, table_schema text, new record, old record, level text",
    "definition": "CREATE OR REPLACE FUNCTION realtime.broadcast_changes(topic_name text, event_name text, operation text, table_name text, table_schema text, new record, old record, level text DEFAULT 'ROW'::text)\n RETURNS void\n LANGUAGE plpgsql\nAS $function$\nDECLARE\n    -- Declare a variable to hold the JSONB representation of the row\n    row_data jsonb := '{}'::jsonb;\nBEGIN\n    IF level = 'STATEMENT' THEN\n        RAISE EXCEPTION 'function can only be triggered for each row, not for each statement';\n    END IF;\n    -- Check the operation type and handle accordingly\n    IF operation = 'INSERT' OR operation = 'UPDATE' OR operation = 'DELETE' THEN\n        row_data := jsonb_build_object('old_record', OLD, 'record', NEW, 'operation', operation, 'table', table_name, 'schema', table_schema);\n        PERFORM realtime.send (row_data, event_name, topic_name);\n    ELSE\n        RAISE EXCEPTION 'Unexpected operation type: %', operation;\n    END IF;\nEXCEPTION\n    WHEN OTHERS THEN\n        RAISE EXCEPTION 'Failed to process the row: %', SQLERRM;\nEND;\n\n$function$\n"
  },
  {
    "resource_type": "FUNCTION",
    "schema": "public",
    "resource_name": "create_broadcast_queue",
    "arguments": "p_campaign_id uuid, p_user_id uuid",
    "definition": "CREATE OR REPLACE FUNCTION public.create_broadcast_queue(p_campaign_id uuid, p_user_id uuid)\n RETURNS integer\n LANGUAGE plpgsql\n SECURITY DEFINER\n SET search_path TO 'public'\nAS $function$\r\nDECLARE\r\n  v_campaign RECORD;\r\n  v_recipient_count INTEGER := 0;\r\n  v_whatsapp_instance_id UUID;\r\nBEGIN\r\n  SELECT * INTO v_campaign\r\n  FROM public.broadcast_campaigns\r\n  WHERE id = p_campaign_id \r\n    AND created_by_user_id = p_user_id;\r\n    \r\n  IF v_campaign IS NULL THEN\r\n    RAISE EXCEPTION 'Campaign not found or access denied';\r\n  END IF;\r\n  \r\n  SELECT id INTO v_whatsapp_instance_id\r\n  FROM public.whatsapp_instances\r\n  WHERE created_by_user_id = p_user_id\r\n    AND connection_status = 'connected'\r\n  ORDER BY created_at DESC\r\n  LIMIT 1;\r\n  \r\n  IF v_whatsapp_instance_id IS NULL THEN\r\n    RAISE EXCEPTION 'No active WhatsApp instance found';\r\n  END IF;\r\n  \r\n  -- Inserir na fila baseado no target_type\r\n  IF v_campaign.target_type = 'all' THEN\r\n    INSERT INTO public.broadcast_queue (\r\n      campaign_id,\r\n      whatsapp_instance_id,\r\n      lead_id,\r\n      phone,\r\n      contact_name,\r\n      message_text,\r\n      media_type,\r\n      media_url,\r\n      scheduled_for\r\n    )\r\n    SELECT \r\n      p_campaign_id,\r\n      v_whatsapp_instance_id,\r\n      l.id,\r\n      l.phone,\r\n      l.name,\r\n      v_campaign.message_text,\r\n      v_campaign.media_type,\r\n      v_campaign.media_url,\r\n      COALESCE(v_campaign.scheduled_at, NOW())\r\n    FROM public.leads l\r\n    WHERE l.created_by_user_id = p_user_id\r\n      AND l.phone IS NOT NULL \r\n      AND l.phone != '';\r\n      \r\n    GET DIAGNOSTICS v_recipient_count = ROW_COUNT;\r\n  END IF;\r\n  \r\n  UPDATE public.broadcast_campaigns\r\n  SET \r\n    status = 'running',\r\n    total_recipients = v_recipient_count,\r\n    updated_at = NOW()\r\n  WHERE id = p_campaign_id;\r\n  \r\n  RETURN v_recipient_count;\r\nEND;\r\n$function$\n"
  },
  {
    "resource_type": "FUNCTION",
    "schema": "public",
    "resource_name": "get_user_broadcast_campaigns",
    "arguments": "p_user_id uuid",
    "definition": "CREATE OR REPLACE FUNCTION public.get_user_broadcast_campaigns(p_user_id uuid)\n RETURNS TABLE(id uuid, name text, message_text text, media_type text, media_url text, target_type text, target_config jsonb, schedule_type text, scheduled_at timestamp with time zone, status text, total_recipients integer, sent_count integer, failed_count integer, rate_limit_per_minute integer, business_hours_only boolean, timezone text, created_at timestamp with time zone, updated_at timestamp with time zone)\n LANGUAGE plpgsql\n SECURITY DEFINER\n SET search_path TO 'public'\nAS $function$\nBEGIN\n  RETURN QUERY\n  SELECT \n    bc.id,\n    bc.name,\n    bc.message_text,\n    bc.media_type,\n    bc.media_url,\n    bc.target_type,\n    bc.target_config,\n    bc.schedule_type,\n    bc.scheduled_at,\n    bc.status,\n    bc.total_recipients,\n    bc.sent_count,\n    bc.failed_count,\n    bc.rate_limit_per_minute,\n    bc.business_hours_only,\n    bc.timezone,\n    bc.created_at,\n    bc.updated_at\n  FROM public.broadcast_campaigns bc\n  WHERE bc.created_by_user_id = p_user_id\n  ORDER BY bc.created_at DESC;\nEND;\n$function$\n"
  }
]


[
  {
    "resource_type": "TRIGGER",
    "trigger_schema": "public",
    "resource_name": "update_broadcast_campaigns_updated_at",
    "table_name": "broadcast_campaigns",
    "action_statement": "EXECUTE FUNCTION update_updated_at_column()"
  },
  {
    "resource_type": "TRIGGER",
    "trigger_schema": "public",
    "resource_name": "update_broadcast_queue_updated_at",
    "table_name": "broadcast_queue",
    "action_statement": "EXECUTE FUNCTION update_updated_at_column()"
  }
]



[
  {
    "resource_type": "POLICY",
    "schemaname": "public",
    "tablename": "broadcast_campaigns",
    "resource_name": "Service role can access all campaigns",
    "permissive": "PERMISSIVE",
    "roles": "{service_role}",
    "cmd": "ALL",
    "qual": "true",
    "with_check": "true"
  },
  {
    "resource_type": "POLICY",
    "schemaname": "public",
    "tablename": "broadcast_campaigns",
    "resource_name": "Users can manage their own campaigns",
    "permissive": "PERMISSIVE",
    "roles": "{public}",
    "cmd": "ALL",
    "qual": "(created_by_user_id = auth.uid())",
    "with_check": "(created_by_user_id = auth.uid())"
  },
  {
    "resource_type": "POLICY",
    "schemaname": "public",
    "tablename": "broadcast_history",
    "resource_name": "Service role can manage all history",
    "permissive": "PERMISSIVE",
    "roles": "{service_role}",
    "cmd": "ALL",
    "qual": "true",
    "with_check": "true"
  },
  {
    "resource_type": "POLICY",
    "schemaname": "public",
    "tablename": "broadcast_history",
    "resource_name": "Users can view their campaign history",
    "permissive": "PERMISSIVE",
    "roles": "{public}",
    "cmd": "SELECT",
    "qual": "(campaign_id IN ( SELECT broadcast_campaigns.id\n   FROM broadcast_campaigns\n  WHERE (broadcast_campaigns.created_by_user_id = auth.uid())))",
    "with_check": null
  },
  {
    "resource_type": "POLICY",
    "schemaname": "public",
    "tablename": "broadcast_queue",
    "resource_name": "Service role can manage all queue",
    "permissive": "PERMISSIVE",
    "roles": "{service_role}",
    "cmd": "ALL",
    "qual": "true",
    "with_check": "true"
  },
  {
    "resource_type": "POLICY",
    "schemaname": "public",
    "tablename": "broadcast_queue",
    "resource_name": "Users can view their campaign queue",
    "permissive": "PERMISSIVE",
    "roles": "{public}",
    "cmd": "SELECT",
    "qual": "(campaign_id IN ( SELECT broadcast_campaigns.id\n   FROM broadcast_campaigns\n  WHERE (broadcast_campaigns.created_by_user_id = auth.uid())))",
    "with_check": null
  },
  {
    "resource_type": "POLICY",
    "schemaname": "public",
    "tablename": "broadcast_rate_limits",
    "resource_name": "Service role can manage all rate limits",
    "permissive": "PERMISSIVE",
    "roles": "{service_role}",
    "cmd": "ALL",
    "qual": "true",
    "with_check": "true"
  },
  {
    "resource_type": "POLICY",
    "schemaname": "public",
    "tablename": "broadcast_rate_limits",
    "resource_name": "Users can manage their own rate limits",
    "permissive": "PERMISSIVE",
    "roles": "{public}",
    "cmd": "ALL",
    "qual": "(user_id = auth.uid())",
    "with_check": "(user_id = auth.uid())"
  }
]



[
  {
    "resource_type": "POLICY",
    "schemaname": "public",
    "tablename": "broadcast_campaigns",
    "resource_name": "Service role can access all campaigns",
    "permissive": "PERMISSIVE",
    "roles": "{service_role}",
    "cmd": "ALL",
    "qual": "true",
    "with_check": "true"
  },
  {
    "resource_type": "POLICY",
    "schemaname": "public",
    "tablename": "broadcast_campaigns",
    "resource_name": "Users can manage their own campaigns",
    "permissive": "PERMISSIVE",
    "roles": "{public}",
    "cmd": "ALL",
    "qual": "(created_by_user_id = auth.uid())",
    "with_check": "(created_by_user_id = auth.uid())"
  },
  {
    "resource_type": "POLICY",
    "schemaname": "public",
    "tablename": "broadcast_history",
    "resource_name": "Service role can manage all history",
    "permissive": "PERMISSIVE",
    "roles": "{service_role}",
    "cmd": "ALL",
    "qual": "true",
    "with_check": "true"
  },
  {
    "resource_type": "POLICY",
    "schemaname": "public",
    "tablename": "broadcast_history",
    "resource_name": "Users can view their campaign history",
    "permissive": "PERMISSIVE",
    "roles": "{public}",
    "cmd": "SELECT",
    "qual": "(campaign_id IN ( SELECT broadcast_campaigns.id\n   FROM broadcast_campaigns\n  WHERE (broadcast_campaigns.created_by_user_id = auth.uid())))",
    "with_check": null
  },
  {
    "resource_type": "POLICY",
    "schemaname": "public",
    "tablename": "broadcast_queue",
    "resource_name": "Service role can manage all queue",
    "permissive": "PERMISSIVE",
    "roles": "{service_role}",
    "cmd": "ALL",
    "qual": "true",
    "with_check": "true"
  },
  {
    "resource_type": "POLICY",
    "schemaname": "public",
    "tablename": "broadcast_queue",
    "resource_name": "Users can view their campaign queue",
    "permissive": "PERMISSIVE",
    "roles": "{public}",
    "cmd": "SELECT",
    "qual": "(campaign_id IN ( SELECT broadcast_campaigns.id\n   FROM broadcast_campaigns\n  WHERE (broadcast_campaigns.created_by_user_id = auth.uid())))",
    "with_check": null
  },
  {
    "resource_type": "POLICY",
    "schemaname": "public",
    "tablename": "broadcast_rate_limits",
    "resource_name": "Service role can manage all rate limits",
    "permissive": "PERMISSIVE",
    "roles": "{service_role}",
    "cmd": "ALL",
    "qual": "true",
    "with_check": "true"
  },
  {
    "resource_type": "POLICY",
    "schemaname": "public",
    "tablename": "broadcast_rate_limits",
    "resource_name": "Users can manage their own rate limits",
    "permissive": "PERMISSIVE",
    "roles": "{public}",
    "cmd": "ALL",
    "qual": "(user_id = auth.uid())",
    "with_check": "(user_id = auth.uid())"
  }
]


[
  {
    "resource_type": "FOREIGN_KEY",
    "table_schema": "public",
    "table_name": "broadcast_campaigns",
    "resource_name": "broadcast_campaigns_created_by_user_id_fkey",
    "column_name": "created_by_user_id",
    "foreign_table_name": "profiles",
    "foreign_column_name": "id"
  },
  {
    "resource_type": "FOREIGN_KEY",
    "table_schema": "public",
    "table_name": "broadcast_history",
    "resource_name": "broadcast_history_campaign_id_fkey",
    "column_name": "campaign_id",
    "foreign_table_name": "broadcast_campaigns",
    "foreign_column_name": "id"
  },
  {
    "resource_type": "FOREIGN_KEY",
    "table_schema": "public",
    "table_name": "broadcast_history",
    "resource_name": "broadcast_history_lead_id_fkey",
    "column_name": "lead_id",
    "foreign_table_name": "leads",
    "foreign_column_name": "id"
  },
  {
    "resource_type": "FOREIGN_KEY",
    "table_schema": "public",
    "table_name": "broadcast_history",
    "resource_name": "broadcast_history_queue_id_fkey",
    "column_name": "queue_id",
    "foreign_table_name": "broadcast_queue",
    "foreign_column_name": "id"
  },
  {
    "resource_type": "FOREIGN_KEY",
    "table_schema": "public",
    "table_name": "broadcast_queue",
    "resource_name": "broadcast_queue_campaign_id_fkey",
    "column_name": "campaign_id",
    "foreign_table_name": "broadcast_campaigns",
    "foreign_column_name": "id"
  },
  {
    "resource_type": "FOREIGN_KEY",
    "table_schema": "public",
    "table_name": "broadcast_queue",
    "resource_name": "broadcast_queue_whatsapp_instance_id_fkey",
    "column_name": "whatsapp_instance_id",
    "foreign_table_name": "whatsapp_instances",
    "foreign_column_name": "id"
  },
  {
    "resource_type": "FOREIGN_KEY",
    "table_schema": "public",
    "table_name": "broadcast_queue",
    "resource_name": "broadcast_queue_lead_id_fkey",
    "column_name": "lead_id",
    "foreign_table_name": "leads",
    "foreign_column_name": "id"
  }
]


[
  {
    "resource_type": "COLUMN_REFERENCE",
    "table_schema": "public",
    "table_name": "broadcast_campaigns",
    "column_name": "business_hours_only",
    "data_type": "boolean"
  },
  {
    "resource_type": "COLUMN_REFERENCE",
    "table_schema": "public",
    "table_name": "broadcast_campaigns",
    "column_name": "created_at",
    "data_type": "timestamp with time zone"
  },
  {
    "resource_type": "COLUMN_REFERENCE",
    "table_schema": "public",
    "table_name": "broadcast_campaigns",
    "column_name": "created_by_user_id",
    "data_type": "uuid"
  },
  {
    "resource_type": "COLUMN_REFERENCE",
    "table_schema": "public",
    "table_name": "broadcast_campaigns",
    "column_name": "failed_count",
    "data_type": "integer"
  },
  {
    "resource_type": "COLUMN_REFERENCE",
    "table_schema": "public",
    "table_name": "broadcast_campaigns",
    "column_name": "id",
    "data_type": "uuid"
  },
  {
    "resource_type": "COLUMN_REFERENCE",
    "table_schema": "public",
    "table_name": "broadcast_campaigns",
    "column_name": "media_type",
    "data_type": "text"
  },
  {
    "resource_type": "COLUMN_REFERENCE",
    "table_schema": "public",
    "table_name": "broadcast_campaigns",
    "column_name": "media_url",
    "data_type": "text"
  },
  {
    "resource_type": "COLUMN_REFERENCE",
    "table_schema": "public",
    "table_name": "broadcast_campaigns",
    "column_name": "message_text",
    "data_type": "text"
  },
  {
    "resource_type": "COLUMN_REFERENCE",
    "table_schema": "public",
    "table_name": "broadcast_campaigns",
    "column_name": "name",
    "data_type": "text"
  },
  {
    "resource_type": "COLUMN_REFERENCE",
    "table_schema": "public",
    "table_name": "broadcast_campaigns",
    "column_name": "rate_limit_per_minute",
    "data_type": "integer"
  },
  {
    "resource_type": "COLUMN_REFERENCE",
    "table_schema": "public",
    "table_name": "broadcast_campaigns",
    "column_name": "schedule_type",
    "data_type": "text"
  },
  {
    "resource_type": "COLUMN_REFERENCE",
    "table_schema": "public",
    "table_name": "broadcast_campaigns",
    "column_name": "scheduled_at",
    "data_type": "timestamp with time zone"
  },
  {
    "resource_type": "COLUMN_REFERENCE",
    "table_schema": "public",
    "table_name": "broadcast_campaigns",
    "column_name": "sent_count",
    "data_type": "integer"
  },
  {
    "resource_type": "COLUMN_REFERENCE",
    "table_schema": "public",
    "table_name": "broadcast_campaigns",
    "column_name": "status",
    "data_type": "text"
  },
  {
    "resource_type": "COLUMN_REFERENCE",
    "table_schema": "public",
    "table_name": "broadcast_campaigns",
    "column_name": "target_config",
    "data_type": "jsonb"
  },
  {
    "resource_type": "COLUMN_REFERENCE",
    "table_schema": "public",
    "table_name": "broadcast_campaigns",
    "column_name": "target_type",
    "data_type": "text"
  },
  {
    "resource_type": "COLUMN_REFERENCE",
    "table_schema": "public",
    "table_name": "broadcast_campaigns",
    "column_name": "timezone",
    "data_type": "text"
  },
  {
    "resource_type": "COLUMN_REFERENCE",
    "table_schema": "public",
    "table_name": "broadcast_campaigns",
    "column_name": "total_recipients",
    "data_type": "integer"
  },
  {
    "resource_type": "COLUMN_REFERENCE",
    "table_schema": "public",
    "table_name": "broadcast_campaigns",
    "column_name": "updated_at",
    "data_type": "timestamp with time zone"
  },
  {
    "resource_type": "COLUMN_REFERENCE",
    "table_schema": "public",
    "table_name": "broadcast_history",
    "column_name": "campaign_id",
    "data_type": "uuid"
  },
  {
    "resource_type": "COLUMN_REFERENCE",
    "table_schema": "public",
    "table_name": "broadcast_history",
    "column_name": "created_at",
    "data_type": "timestamp with time zone"
  },
  {
    "resource_type": "COLUMN_REFERENCE",
    "table_schema": "public",
    "table_name": "broadcast_history",
    "column_name": "error_message",
    "data_type": "text"
  },
  {
    "resource_type": "COLUMN_REFERENCE",
    "table_schema": "public",
    "table_name": "broadcast_history",
    "column_name": "external_message_id",
    "data_type": "text"
  },
  {
    "resource_type": "COLUMN_REFERENCE",
    "table_schema": "public",
    "table_name": "broadcast_history",
    "column_name": "id",
    "data_type": "uuid"
  },
  {
    "resource_type": "COLUMN_REFERENCE",
    "table_schema": "public",
    "table_name": "broadcast_history",
    "column_name": "lead_id",
    "data_type": "uuid"
  },
  {
    "resource_type": "COLUMN_REFERENCE",
    "table_schema": "public",
    "table_name": "broadcast_history",
    "column_name": "phone",
    "data_type": "text"
  },
  {
    "resource_type": "COLUMN_REFERENCE",
    "table_schema": "public",
    "table_name": "broadcast_history",
    "column_name": "queue_id",
    "data_type": "uuid"
  },
  {
    "resource_type": "COLUMN_REFERENCE",
    "table_schema": "public",
    "table_name": "broadcast_history",
    "column_name": "sent_at",
    "data_type": "timestamp with time zone"
  },
  {
    "resource_type": "COLUMN_REFERENCE",
    "table_schema": "public",
    "table_name": "broadcast_history",
    "column_name": "status",
    "data_type": "text"
  },
  {
    "resource_type": "COLUMN_REFERENCE",
    "table_schema": "public",
    "table_name": "broadcast_queue",
    "column_name": "campaign_id",
    "data_type": "uuid"
  },
  {
    "resource_type": "COLUMN_REFERENCE",
    "table_schema": "public",
    "table_name": "broadcast_queue",
    "column_name": "contact_name",
    "data_type": "text"
  },
  {
    "resource_type": "COLUMN_REFERENCE",
    "table_schema": "public",
    "table_name": "broadcast_queue",
    "column_name": "created_at",
    "data_type": "timestamp with time zone"
  },
  {
    "resource_type": "COLUMN_REFERENCE",
    "table_schema": "public",
    "table_name": "broadcast_queue",
    "column_name": "external_message_id",
    "data_type": "text"
  },
  {
    "resource_type": "COLUMN_REFERENCE",
    "table_schema": "public",
    "table_name": "broadcast_queue",
    "column_name": "id",
    "data_type": "uuid"
  },
  {
    "resource_type": "COLUMN_REFERENCE",
    "table_schema": "public",
    "table_name": "broadcast_queue",
    "column_name": "last_error",
    "data_type": "text"
  },
  {
    "resource_type": "COLUMN_REFERENCE",
    "table_schema": "public",
    "table_name": "broadcast_queue",
    "column_name": "lead_id",
    "data_type": "uuid"
  },
  {
    "resource_type": "COLUMN_REFERENCE",
    "table_schema": "public",
    "table_name": "broadcast_queue",
    "column_name": "max_retries",
    "data_type": "integer"
  },
  {
    "resource_type": "COLUMN_REFERENCE",
    "table_schema": "public",
    "table_name": "broadcast_queue",
    "column_name": "media_type",
    "data_type": "text"
  },
  {
    "resource_type": "COLUMN_REFERENCE",
    "table_schema": "public",
    "table_name": "broadcast_queue",
    "column_name": "media_url",
    "data_type": "text"
  },
  {
    "resource_type": "COLUMN_REFERENCE",
    "table_schema": "public",
    "table_name": "broadcast_queue",
    "column_name": "message_text",
    "data_type": "text"
  },
  {
    "resource_type": "COLUMN_REFERENCE",
    "table_schema": "public",
    "table_name": "broadcast_queue",
    "column_name": "phone",
    "data_type": "text"
  },
  {
    "resource_type": "COLUMN_REFERENCE",
    "table_schema": "public",
    "table_name": "broadcast_queue",
    "column_name": "priority",
    "data_type": "integer"
  },
  {
    "resource_type": "COLUMN_REFERENCE",
    "table_schema": "public",
    "table_name": "broadcast_queue",
    "column_name": "retry_count",
    "data_type": "integer"
  },
  {
    "resource_type": "COLUMN_REFERENCE",
    "table_schema": "public",
    "table_name": "broadcast_queue",
    "column_name": "scheduled_for",
    "data_type": "timestamp with time zone"
  },
  {
    "resource_type": "COLUMN_REFERENCE",
    "table_schema": "public",
    "table_name": "broadcast_queue",
    "column_name": "sent_at",
    "data_type": "timestamp with time zone"
  },
  {
    "resource_type": "COLUMN_REFERENCE",
    "table_schema": "public",
    "table_name": "broadcast_queue",
    "column_name": "status",
    "data_type": "text"
  },
  {
    "resource_type": "COLUMN_REFERENCE",
    "table_schema": "public",
    "table_name": "broadcast_queue",
    "column_name": "updated_at",
    "data_type": "timestamp with time zone"
  },
  {
    "resource_type": "COLUMN_REFERENCE",
    "table_schema": "public",
    "table_name": "broadcast_queue",
    "column_name": "whatsapp_instance_id",
    "data_type": "uuid"
  },
  {
    "resource_type": "COLUMN_REFERENCE",
    "table_schema": "public",
    "table_name": "broadcast_rate_limits",
    "column_name": "created_at",
    "data_type": "timestamp with time zone"
  },
  {
    "resource_type": "COLUMN_REFERENCE",
    "table_schema": "public",
    "table_name": "broadcast_rate_limits",
    "column_name": "current_date_value",
    "data_type": "date"
  },
  {
    "resource_type": "COLUMN_REFERENCE",
    "table_schema": "public",
    "table_name": "broadcast_rate_limits",
    "column_name": "current_minute",
    "data_type": "timestamp with time zone"
  },
  {
    "resource_type": "COLUMN_REFERENCE",
    "table_schema": "public",
    "table_name": "broadcast_rate_limits",
    "column_name": "id",
    "data_type": "uuid"
  },
  {
    "resource_type": "COLUMN_REFERENCE",
    "table_schema": "public",
    "table_name": "broadcast_rate_limits",
    "column_name": "messages_sent_current_minute",
    "data_type": "integer"
  },
  {
    "resource_type": "COLUMN_REFERENCE",
    "table_schema": "public",
    "table_name": "broadcast_rate_limits",
    "column_name": "total_messages_today",
    "data_type": "integer"
  },
  {
    "resource_type": "COLUMN_REFERENCE",
    "table_schema": "public",
    "table_name": "broadcast_rate_limits",
    "column_name": "updated_at",
    "data_type": "timestamp with time zone"
  },
  {
    "resource_type": "COLUMN_REFERENCE",
    "table_schema": "public",
    "table_name": "broadcast_rate_limits",
    "column_name": "user_id",
    "data_type": "uuid"
  }
]




[
  {
    "resource_type": "DEPENDENCY",
    "dependent_object": "broadcast_campaigns",
    "referenced_object": "2200",
    "deptype": "n"
  },
  {
    "resource_type": "DEPENDENCY",
    "dependent_object": "pg_toast.pg_toast_573997",
    "referenced_object": "broadcast_campaigns",
    "deptype": "i"
  },
  {
    "resource_type": "DEPENDENCY",
    "dependent_object": "broadcast_campaigns_pkey",
    "referenced_object": "574019",
    "deptype": "i"
  },
  {
    "resource_type": "DEPENDENCY",
    "dependent_object": "broadcast_queue",
    "referenced_object": "2200",
    "deptype": "n"
  },
  {
    "resource_type": "DEPENDENCY",
    "dependent_object": "pg_toast.pg_toast_574020",
    "referenced_object": "broadcast_queue",
    "deptype": "i"
  },
  {
    "resource_type": "DEPENDENCY",
    "dependent_object": "broadcast_queue_pkey",
    "referenced_object": "574036",
    "deptype": "i"
  },
  {
    "resource_type": "DEPENDENCY",
    "dependent_object": "broadcast_history",
    "referenced_object": "2200",
    "deptype": "n"
  },
  {
    "resource_type": "DEPENDENCY",
    "dependent_object": "pg_toast.pg_toast_574052",
    "referenced_object": "broadcast_history",
    "deptype": "i"
  },
  {
    "resource_type": "DEPENDENCY",
    "dependent_object": "broadcast_history_pkey",
    "referenced_object": "574062",
    "deptype": "i"
  },
  {
    "resource_type": "DEPENDENCY",
    "dependent_object": "broadcast_rate_limits",
    "referenced_object": "2200",
    "deptype": "n"
  },
  {
    "resource_type": "DEPENDENCY",
    "dependent_object": "broadcast_rate_limits_pkey",
    "referenced_object": "574089",
    "deptype": "i"
  },
  {
    "resource_type": "DEPENDENCY",
    "dependent_object": "idx_broadcast_rate_limits_unique",
    "referenced_object": "broadcast_rate_limits",
    "deptype": "a"
  },
  {
    "resource_type": "DEPENDENCY",
    "dependent_object": "idx_broadcast_campaigns_user",
    "referenced_object": "broadcast_campaigns",
    "deptype": "a"
  },
  {
    "resource_type": "DEPENDENCY",
    "dependent_object": "idx_broadcast_campaigns_status",
    "referenced_object": "broadcast_campaigns",
    "deptype": "a"
  },
  {
    "resource_type": "DEPENDENCY",
    "dependent_object": "idx_broadcast_queue_campaign",
    "referenced_object": "broadcast_queue",
    "deptype": "a"
  },
  {
    "resource_type": "DEPENDENCY",
    "dependent_object": "idx_broadcast_queue_status",
    "referenced_object": "broadcast_queue",
    "deptype": "a"
  },
  {
    "resource_type": "DEPENDENCY",
    "dependent_object": "idx_broadcast_queue_scheduled",
    "referenced_object": "broadcast_queue",
    "deptype": "a"
  },
  {
    "resource_type": "DEPENDENCY",
    "dependent_object": "idx_broadcast_history_campaign",
    "referenced_object": "broadcast_history",
    "deptype": "a"
  }
]

