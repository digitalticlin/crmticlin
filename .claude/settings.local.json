{
  "permissions": {
    "allow": [
      "Bash(npm run build:*)",
      "Bash(git add:*)",
      "Bash(rm:*)",
      "Bash(powershell:*)",
      "Bash(grep:*)",
      "Bash(npm run build:dev:*)",
      "Bash(git commit -m \"$(cat <<''EOF''\nchore: Limpar projeto removendo 200 arquivos obsoletos da raiz\n\nRemove scripts temporÃ¡rios, arquivos de teste, debug e documentaÃ§Ã£o\ntÃ©cnica obsoleta que estavam na raiz do projeto, mantendo apenas\narquivos essenciais de configuraÃ§Ã£o.\n\nArquivos mantidos:\n- ConfiguraÃ§Ãµes do projeto (vite, tailwind, postcss, eslint, jest)\n- ecosystem.config.js (PM2)\n- package.json e tsconfig\n- README.md e index.html\n\nTipos de arquivos removidos:\n- Scripts de migraÃ§Ã£o/debug (.js, .ts, .sh, .ps1, .py)\n- DocumentaÃ§Ã£o tÃ©cnica obsoleta (.md)\n- Scripts SQL de teste/debug\n- Arquivos temporÃ¡rios de teste\n- Backups de cÃ³digo antigo\n\nðŸ¤– Generated with [Claude Code](https://claude.com/claude-code)\n\nCo-Authored-By: Claude <noreply@anthropic.com>\nEOF\n)\")",
      "Bash(git log:*)",
      "Bash(git commit -m \"$(cat <<''EOF''\nfeat: Padronizar JSONB e corrigir lÃ³gica de ramificaÃ§Ãµes do Flow Builder\n\n**JSONB Padronizado:**\n- Adicionar campo `action` com `type` e `data` em todos os blocos\n- Definir action.type: send_and_wait | send_only | decision | update_data | end\n- Manter retrocompatibilidade com campos existentes\n\n**LÃ³gica de RamificaÃ§Ãµes Corrigida:**\n- Implementar BFS correto para calcular distÃ¢ncias\n- Agrupar nodes pela MESMA distÃ¢ncia em variaÃ§Ãµes (A1, A2, B1, B2)\n- Antes: sempre criava passos sequenciais (A, B, C, D...)\n- Agora: detecta ramificaÃ§Ãµes e agrupa corretamente\n\n**Arquivos modificados:**\n- src/types/flowStructure.ts - interface ActionData\n- src/utils/flowConverter.ts - funÃ§Ãµes BFS e agrupamento\n- supabase/functions/webhook_whatsapp_web/index.ts - correÃ§Ã£o JWT upload\n\n**Exemplo de estrutura gerada:**\n```\nINÃCIO â†’ Pergunta (dist=1) = PASSO A1\n         â”œâ†’ Sim (dist=2) = PASSO B1\n         â””â†’ NÃ£o (dist=2) = PASSO B2  â† Mesma distÃ¢ncia = VARIAÃ‡ÃƒO!\n```\n\nðŸ¤– Generated with [Claude Code](https://claude.com/claude-code)\n\nCo-Authored-By: Claude <noreply@anthropic.com>\nEOF\n)\")",
      "Bash(git push:*)",
      "Bash(ssh root@31.97.163.57 \"pm2 logs --lines 1000 --nostream | grep ''556391378430''\")",
      "Bash(npm run dev:*)",
      "Bash(git commit:*)",
      "Bash(npx supabase functions deploy:*)",
      "Bash(npx supabase storage ls:*)",
      "Bash(node -p \"require(''fs'').writeFileSync(''temp-edit-agent.txt'', Buffer.from(''aW1wb3J0IHsgdXNlU3RhdGUsIHVzZUVmZmVjdCB9IGZyb20gInJlYWN0IjsKaW1wb3J0IHsgdXNlTmF2aWdhdGUsIHVzZVBhcmFtcywgdXNlU2VhcmNoUGFyYW1zIH0gZnJvbSAicmVhY3Qtcm91dGVyLWRvbSI7CmltcG9ydCB7IFBhZ2VIZWFkZXIgfSBmcm9tICJAL2NvbXBvbmVudHMvbGF5b3V0L1BhZ2VIZWFkZXIiOwppbXBvcnQgeyBXaXphcmRTdGVwcyB9IGZyb20gIkAvY29tcG9uZW50cy9haS1hZ2VudHMvV2l6YXJkU3RlcHMiOwppbXBvcnQgeyBTdGVwMUJhc2ljIH0gZnJvbSAiQC9jb21wb25lbnRzL2FpLWFnZW50cy9TdGVwMUJhc2ljIjsKaW1wb3J0IHsgU3RlcDJQZXJzb25hbGl0eSB9IGZyb20gIkAvY29tcG9uZW50cy9haS1hZ2VudHMvU3RlcDJQZXJzb25hbGl0eSI7CmltcG9ydCB7IFN0ZXAzS25vd2xlZGdlIH0gZnJvbSAiQC9jb21wb25lbnRzL2FpLWFnZW50cy9TdGVwM0tub3dsZWRnZSI7CmltcG9ydCB7IEJ1dHRvbiB9IGZyb20gIkAvY29tcG9uZW50cy91aS9idXR0b24iOwppbXBvcnQgeyBBcnJvd0xlZnQsIEFycm93UmlnaHQsIFNhdmUgfSBmcm9tICJsdWNpZGUtcmVhY3QiOwppbXBvcnQgeyBzdXBhYmFzZSB9IGZyb20gIkAvaW50ZWdyYXRpb25zL3N1cGFiYXNlL2NsaWVudCI7CmltcG9ydCB7IHRvYXN0IH0gZnJvbSAic29ubmVyIjsKaW1wb3J0IHsKICBBbGVydERpYWxvZywKICBBbGVydERpYWxvZ0FjdGlvbiwKICBBbGVydERpYWxvZ0NhbmNlbCwKICBBbGVydERpYWxvZ0NvbnRlbnQsCiAgQWxlcnREaWFsb2dEZXNjcmlwdGlvbiwKICBBbGVydERpYWxvZ0Zvb3RlciwKICBBbGVydERpYWxvZ0hlYWRlciwKICBBbGVydERpYWxvZ1RpdGxlLAp9IGZyb20gIkAvY29tcG9uZW50cy91aS9hbGVydC1kaWFsb2ciOwoKY29uc3QgV0laQVJEX1NURVBTID0gWwogIHsgbnVtYmVyOiAxLCB0aXRsZTogJ0NvbmZpZ3VyYcOnw6NvJywgc3VidGl0bGU6ICcnIH0sCiAgeyBudW1iZXI6IDIsIHRpdGxlOiAnQ29tcG9ydGFtZW50bycsIHN1YnRpdGxlOiAnJyB9LAogIHsgbnVtYmVyOiAzLCB0aXRsZTogJ0luZm9ybWHDp8O1ZXMnLCBzdWJ0aXRsZTogJycgfSwKXTsKCmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIEVkaXRBZ2VudCgpIHsKICBjb25zdCBuYXZpZ2F0ZSA9IHVzZU5hdmlnYXRlKCk7CiAgY29uc3QgeyBpZCB9ID0gdXNlUGFyYW1zPHsgaWQ6IHN0cmluZyB9PigpOwogIGNvbnN0IFtzZWFyY2hQYXJhbXNdID0gdXNlU2VhcmNoUGFyYW1zKCk7CiAgY29uc3Qgc3RlcEZyb21VcmwgPSBwYXJzZUludChzZWFyY2hQYXJhbXMuZ2V0KCdzdGVwJykgfHwgJzEnLCAxMCk7CiAgY29uc3QgW2N1cnJlbnRTdGVwLCBzZXRDdXJyZW50U3RlcF0gPSB1c2VTdGF0ZShzdGVwRnJvbVVybCk7CiAgY29uc3QgW2lzU2F2aW5nLCBzZXRJc1NhdmluZ10gPSB1c2VTdGF0ZShmYWxzZSk7CiAgY29uc3QgW2lzTG9hZGluZywgc2V0SXNMb2FkaW5nXSA9IHVzZVN0YXRlKHRydWUpOwoKICAvLyBFc3RhZG9zIHBhcmEgbW9kYWwgZGUgY29uZmlybWHDp8OjbwogIGNvbnN0IFtoYXNVbnNhdmVkQ2hhbmdlcywgc2V0SGFzVW5zYXZlZENoYW5nZXNdID0gdXNlU3RhdGUoZmFsc2UpOwogIGNvbnN0IFtzaG93RXhpdERpYWxvZywgc2V0U2hvd0V4aXREaWFsb2ddID0gdXNlU3RhdGUoZmFsc2UpOwogIGNvbnN0IFtwZW5kaW5nTmF2aWdhdGlvbiwgc2V0UGVuZGluZ05hdmlnYXRpb25dID0gdXNlU3RhdGUoZmFsc2UpOwoKICAvLyBGb3JtIGRhdGEgc3RhdGUKICBjb25zdCBbZm9ybURhdGEsIHNldEZvcm1EYXRhXSA9IHVzZVN0YXRlKHsKICAgIC8vIFN0ZXAgMSAtIELDoXNpY28KICAgIG5hbWU6ICIiLAogICAgb2JqZWN0aXZlOiB7CiAgICAgIG5hbWU6ICJWZW5kYXMiLAogICAgICBkZXNjcmlwdGlvbjogIlNldSBvYmpldGl2byDDqSB2ZW5kZXIuIENvbmR1emEgYSBjb252ZXJzYSBwYXJhIGVudGVuZGVyIGEgbmVjZXNzaWRhZGUgZG8gY2xpZW50ZSwgYXByZXNlbnRlIHNvbHXDp8O1ZXMgYWRlcXVhZGFzLCBjb250b3JuZSBvYmplw6fDtWVzIGRlIGZvcm1hIHBlcnN1YXNpdmEgZSB0cmFiYWxoZSBhdGl2YW1lbnRlIHBhcmEgZmVjaGFyIGEgdmVuZGEuIFNlamEgcHJvYXRpdm8gZW0gb2ZlcmVjZXIgcHJvZHV0b3Mvc2VydmnDp29zIGUgY3JpYXIgc2Vuc28gZGUgdXJnw6puY2lhIHF1YW5kbyBhcHJvcHJpYWRvLiIKICAgIH0sCiAgICBmdW5uZWxfaWQ6IG51bGwgYXMgc3RyaW5nIHwgbnVsbCwKICAgIGluc3RhbmNlX3Bob25lOiBudWxsIGFzIHN0cmluZyB8IG51bGwsCgogICAgLy8gU3RlcCAyIC0gUGVyc29uYWxpZGFkZQogICAgY29tbXVuaWNhdGlvbl9zdHlsZTogewogICAgICBuYW1lOiAiTm9ybWFsIiwKICAgICAgZGVzY3JpcHRpb246ICJVc2UgbGluZ3VhZ2VtIG5hdHVyYWwgZSBhY2Vzc8OtdmVsLiBTZWphIGNvcmRpYWwgc2VtIHNlciBmb3JtYWwgZGVtYWlzLiBQb2RlIHVzYXIgXCJ2b2PDqlwiIGRlIGZvcm1hIGFtaWfDoXZlbC4gRXZpdGUgZ8OtcmlhcyBleGNlc3NpdmFzLCBtYXMgcG9kZSB1c2FyIHRlcm1vcyBjb3RpZGlhbm9zLiBTZWphIGNsYXJvLCBkaXJldG8gZSBtYW50ZW5oYSBlcXVpbMOtYnJpbyBlbnRyZSBwcm9maXNzaW9uYWxpc21vIGUgcHJveGltaWRhZGUuIEVtb2ppcyBvY2FzaW9uYWlzIHPDo28gYWNlaXTDoXZlaXMuIgogICAgfSwKICAgIGFnZW50X2Z1bmN0aW9uOiAiIiwKICAgIHByb2hpYml0aW9uczogW10gYXMgc3RyaW5nW10sCiAgICBzaWduYXR1cmU6ICIiLAogICAgbWVzc2FnZV9zaWduYXR1cmVfZW5hYmxlZDogZmFsc2UsCiAgICBrbm93bGVkZ2VfYmFzZV9lbmFibGVkOiBmYWxzZSwKCiAgICAvLyBTdGVwIDMgLSBDb25oZWNpbWVudG8KICAgIGNvbXBhbnlfaW5mbzogIiIsCiAgICBmYXE6IFtdIGFzIHsgcXVlc3Rpb246IHN0cmluZzsgYW5zd2VyOiBzdHJpbmcgfVtdLAogIH0pOwoKICAvLyBFc3RhZG8gaW5pY2lhbCBwYXJhIGRldGVjdGFyIG11ZGFuw6dhcwogIGNvbnN0IFtpbml0aWFsRm9ybURhdGEsIHNldEluaXRpYWxGb3JtRGF0YV0gPSB1c2VTdGF0ZShmb3JtRGF0YSk7CgogIC8vIERldGVjdGFyIG11ZGFuw6dhcyBuw6NvIHNhbHZhcwogIHVzZUVmZmVjdCgoKSA9PiB7CiAgICBjb25zdCBoYXNDaGFuZ2VzID0gSlNPTi5zdHJpbmdpZnkoZm9ybURhdGEpICE9PSBKU09OLnN0cmluZ2lmeShpbml0aWFsRm9ybURhdGEpOwogICAgc2V0SGFzVW5zYXZlZENoYW5nZXMoaGFzQ2hhbmdlcyk7CiAgfSwgW2Zvcm1EYXRhLCBpbml0aWFsRm9ybURhdGFdKTsKCiAgdXNlRWZmZWN0KCgpID0+IHsKICAgIC8vIE7Do28gdGVudGFyIGNhcnJlZ2FyIHNlIG8gSUQgZm9yICJuZXciCiAgICBpZiAoaWQgJiYgaWQgIT09ICduZXcnKSB7CiAgICAgIGxvYWRBZ2VudERhdGEoaWQpOwogICAgfSBlbHNlIGlmIChpZCA9PT0gJ25ldycpIHsKICAgICAgLy8gU2UgZm9yICJuZXciLCByZWRpcmVjaW9uYXIgcGFyYSBjcmlhciBhZ2VudGUKICAgICAgdG9hc3QuZXJyb3IoJ1VzZSBhIHDDoWdpbmEgZGUgY3JpYXIgYWdlbnRlJyk7CiAgICAgIG5hdmlnYXRlKCcvYWktYWdlbnRzL2NyZWF0ZScpOwogICAgfQogIH0sIFtpZCwgbmF2aWdhdGVdKTsKCiAgdXNlRWZmZWN0KCgpID0+IHsKICAgIGNvbnN0IHN0ZXBGcm9tVXJsID0gcGFyc2VJbnQoc2VhcmNoUGFyYW1zLmdldCgnc3RlcCcpIHx8ICcxJywgMTApOwogICAgaWYgKHN0ZXBGcm9tVXJsID49IDEgJiYgc3RlcEZyb21VcmwgPD0gMykgewogICAgICBzZXRDdXJyZW50U3RlcChzdGVwRnJvbVVybCk7CiAgICB9CiAgfSwgW3NlYXJjaFBhcmFtc10pOwoKICBjb25zdCBsb2FkQWdlbnREYXRhID0gYXN5bmMgKGFnZW50SWQ6IHN0cmluZykgPT4gewogICAgc2V0SXNMb2FkaW5nKHRydWUpOwogICAgdHJ5IHsKICAgICAgY29uc3QgeyBkYXRhOiBhZ2VudCwgZXJyb3I6IGFnZW50RXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlCiAgICAgICAgLmZyb20oJ2FpX2FnZW50cycpCiAgICAgICAgLnNlbGVjdCgnKicpCiAgICAgICAgLmVxKCdpZCcsIGFnZW50SWQpCiAgICAgICAgLnNpbmdsZSgpOwoKICAgICAgaWYgKGFnZW50RXJyb3IpIHRocm93IGFnZW50RXJyb3I7CgogICAgICBjb25zdCBsb2FkZWREYXRhID0gewogICAgICAgIG5hbWU6IGFnZW50Lm5hbWUgfHwgIiIsCiAgICAgICAgb2JqZWN0aXZlOiBhZ2VudC5vYmplY3RpdmUgfHwgeyBuYW1lOiAiVmVuZGFzIiwgZGVzY3JpcHRpb246ICJBZ2VudGUgZm9jYWRvIGVtIGNvbnZlcnRlciBsZWFkcyBlbSBjbGllbnRlcywgdXRpbGl6YW5kbyB0w6ljbmljYXMgZGUgcGVyc3Vhc8OjbyBlIGZlY2hhbWVudG8gZGUgdmVuZGFzIiB9LAogICAgICAgIGZ1bm5lbF9pZDogYWdlbnQuZnVubmVsX2lkLAogICAgICAgIGluc3RhbmNlX3Bob25lOiBhZ2VudC5pbnN0YW5jZV9waG9uZSB8fCBudWxsLAogICAgICAgIGNvbW11bmljYXRpb25fc3R5bGU6IGFnZW50LmNvbW11bmljYXRpb25fc3R5bGUgfHwgeyBuYW1lOiAiTm9ybWFsIiwgZGVzY3JpcHRpb246ICJDb211bmljYcOnw6NvIGVxdWlsaWJyYWRhIGVudHJlIHByb2Zpc3Npb25hbGlzbW8gZSBhY2Vzc2liaWxpZGFkZSwgbWFudGVuZG8gY29yZGlhbGlkYWRlIHNlbSBleGNlc3NvcyBkZSBmb3JtYWxpZGFkZSIgfSwKICAgICAgICBhZ2VudF9mdW5jdGlvbjogYWdlbnQuYWdlbnRfZnVuY3Rpb24gfHwgIiIsCiAgICAgICAgcHJvaGliaXRpb25zOiBhZ2VudC5wcm9oaWJpdGlvbnMgfHwgW10sCiAgICAgICAgc2lnbmF0dXJlOiBhZ2VudC5zaWduYXR1cmUgfHwgIiIsCiAgICAgICAgbWVzc2FnZV9zaWduYXR1cmVfZW5hYmxlZDogYWdlbnQubWVzc2FnZV9zaWduYXR1cmVfZW5hYmxlZCB8fCBmYWxzZSwKICAgICAgICBrbm93bGVkZ2VfYmFzZV9lbmFibGVkOiBhZ2VudC5rbm93bGVkZ2VfYmFzZV9lbmFibGVkIHx8IGZhbHNlLAogICAgICAgIGNvbXBhbnlfaW5mbzogYWdlbnQuY29tcGFueV9pbmZvIHx8ICIiLAogICAgICAgIGZhcTogYWdlbnQuZmFxIHx8IFtdLAogICAgICB9OwoKICAgICAgc2V0Rm9ybURhdGEobG9hZGVkRGF0YSk7CiAgICAgIHNldEluaXRpYWxGb3JtRGF0YShsb2FkZWREYXRhKTsKICAgIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHsKICAgICAgY29uc29sZS5lcnJvcignRXJybyBhbyBjYXJyZWdhciBhZ2VudGU6JywgZXJyb3IpOwogICAgICB0b2FzdC5lcnJvcigiRXJybyBhbyBjYXJyZWdhciBkYWRvcyBkbyBhZ2VudGUiKTsKICAgIH0gZmluYWxseSB7CiAgICAgIHNldElzTG9hZGluZyhmYWxzZSk7CiAgICB9CiAgfTsKCiAgY29uc3QgaGFuZGxlRmllbGRDaGFuZ2UgPSAoZmllbGQ6IHN0cmluZywgdmFsdWU6IGFueSkgPT4gewogICAgc2V0Rm9ybURhdGEocHJldiA9PiAoeyAuLi5wcmV2LCBbZmllbGRdOiB2YWx1ZSB9KSk7CiAgfTsKCiAgY29uc3QgaGFuZGxlU3RlcENsaWNrID0gKHN0ZXBOdW1iZXI6IG51bWJlcikgPT4gewogICAgc2V0Q3VycmVudFN0ZXAoc3RlcE51bWJlcik7CiAgfTsKCiAgY29uc3QgaGFuZGxlTmV4dCA9ICgpID0+IHsKICAgIGlmIChjdXJyZW50U3RlcCA8IDMpIHsKICAgICAgc2V0Q3VycmVudFN0ZXAoY3VycmVudFN0ZXAgKyAxKTsKICAgIH0KICB9OwoKICBjb25zdCBoYW5kbGVQcmV2aW91cyA9ICgpID0+IHsKICAgIGlmIChjdXJyZW50U3RlcCA+IDEpIHsKICAgICAgc2V0Q3VycmVudFN0ZXAoY3VycmVudFN0ZXAgLSAxKTsKICAgIH0KICB9OwoKICBjb25zdCBoYW5kbGVCYWNrQ2xpY2sgPSAoKSA9PiB7CiAgICBpZiAoaGFzVW5zYXZlZENoYW5nZXMpIHsKICAgICAgc2V0U2hvd0V4aXREaWFsb2codHJ1ZSk7CiAgICB9IGVsc2UgewogICAgICBuYXZpZ2F0ZSgnL2FpLWFnZW50cycpOwogICAgfQogIH07CgogIGNvbnN0IGhhbmRsZVNhdmUgPSBhc3luYyAoc2hvdWxkTmF2aWdhdGU6IGJvb2xlYW4gPSB0cnVlKSA9PiB7CiAgICBpZiAoIWlkKSByZXR1cm47CgogICAgc2V0SXNTYXZpbmcodHJ1ZSk7CgogICAgdHJ5IHsKICAgICAgY29uc3QgeyBlcnJvcjogYWdlbnRFcnJvciB9ID0gYXdhaXQgc3VwYWJhc2UKICAgICAgICAuZnJvbSgnYWlfYWdlbnRzJykKICAgICAgICAudXBkYXRlKHsKICAgICAgICAgIG5hbWU6IGZvcm1EYXRhLm5hbWUsCiAgICAgICAgICBvYmplY3RpdmU6IGZvcm1EYXRhLm9iamVjdGl2ZSwKICAgICAgICAgIGZ1bm5lbF9pZDogZm9ybURhdGEuZnVubmVsX2lkLAogICAgICAgICAgaW5zdGFuY2VfcGhvbmU6IGZvcm1EYXRhLmluc3RhbmNlX3Bob25lLAogICAgICAgICAgY29tbXVuaWNhdGlvbl9zdHlsZTogZm9ybURhdGEuY29tbXVuaWNhdGlvbl9zdHlsZSwKICAgICAgICAgIGFnZW50X2Z1bmN0aW9uOiBmb3JtRGF0YS5hZ2VudF9mdW5jdGlvbiwKICAgICAgICAgIHByb2hpYml0aW9uczogZm9ybURhdGEucHJvaGliaXRpb25zLAogICAgICAgICAgc2lnbmF0dXJlOiBmb3JtRGF0YS5zaWduYXR1cmUsCiAgICAgICAgICBrbm93bGVkZ2VfYmFzZV9lbmFibGVkOiBmb3JtRGF0YS5rbm93bGVkZ2VfYmFzZV9lbmFibGVkLAogICAgICAgICAgY29tcGFueV9pbmZvOiBmb3JtRGF0YS5jb21wYW55X2luZm8sCiAgICAgICAgICBmYXE6IGZvcm1EYXRhLmZhcSwKICAgICAgICAgIHVwZGF0ZWRfYXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKQogICAgICAgIH0pCiAgICAgICAgLmVxKCdpZCcsIGlkKTsKCiAgICAgIGlmIChhZ2VudEVycm9yKSB0aHJvdyBhZ2VudEVycm9yOwoKICAgICAgdG9hc3Quc3VjY2VzcygiQWdlbnRlIGF0dWFsaXphZG8gY29tIHN1Y2Vzc28hIik7CgogICAgICAvLyBBdHVhbGl6YXIgbyBpbml0aWFsRm9ybURhdGEgYXDDs3Mgc2FsdmFyCiAgICAgIHNldEluaXRpYWxGb3JtRGF0YShmb3JtRGF0YSk7CiAgICAgIHNldEhhc1Vuc2F2ZWRDaGFuZ2VzKGZhbHNlKTsKCiAgICAgIGlmIChzaG91bGROYXZpZ2F0ZSkgewogICAgICAgIG5hdmlnYXRlKCcvYWktYWdlbnRzJyk7CiAgICAgIH0KICAgIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHsKICAgICAgY29uc29sZS5lcnJvcignRXJybyBhbyBhdHVhbGl6YXIgYWdlbnRlOicsIGVycm9yKTsKICAgICAgdG9hc3QuZXJyb3IoZXJyb3IubWVzc2FnZSB8fCAiRXJybyBhbyBhdHVhbGl6YXIgYWdlbnRlIik7CiAgICB9IGZpbmFsbHkgewogICAgICBzZXRJc1NhdmluZyhmYWxzZSk7CiAgICB9CiAgfTsKCiAgY29uc3QgaGFuZGxlRXhpdFdpdGhvdXRTYXZpbmcgPSAoKSA9PiB7CiAgICBzZXRTaG93RXhpdERpYWxvZyhmYWxzZSk7CiAgICBuYXZpZ2F0ZSgnL2FpLWFnZW50cycpOwogIH07CgogIGNvbnN0IGhhbmRsZVNhdmVBbmRFeGl0ID0gYXN5bmMgKCkgPT4gewogICAgc2V0U2hvd0V4aXREaWFsb2coZmFsc2UpOwogICAgYXdhaXQgaGFuZGxlU2F2ZSh0cnVlKTsKICB9OwoKICBjb25zdCBiYWNrQnV0dG9uID0gKAogICAgPEJ1dHRvbgogICAgICB2YXJpYW50PSJnaG9zdCIKICAgICAgc2l6ZT0iaWNvbiIKICAgICAgb25DbGljaz17aGFuZGxlQmFja0NsaWNrfQogICAgICBjbGFzc05hbWU9Imggd10gcm91bmRlZC1sZyBob3ZlcjpiZy13aGl0ZS80MCB0cmFuc2l0aW9uLWFsbCIKICAgID4KICAgICAgPEFycm93TGVmdCBjbGFzc05hbWU9Img1IHc1IHRleHQtZ3JheS05MDAiIC8+CiAgICA8L0J1dHRvbj4KICApOwoKICBpZiAoaXNMb2FkaW5nKSB7CiAgICByZXR1cm4gKAogICAgICA8PgogICAgICAgIDxQYWdlSGVhZGVyIHRpdGxlPSJFZGl0YXIgQWdlbnRlIGRlIElBIiBiYWNrQnV0dG9uPXtiYWNrQnV0dG9ufSAvPgogICAgICAgIDxkaXYgY2xhc3NOYW1lPSJmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciBweS04Ij4KICAgICAgICAgIDxwPkNhcnJlZ2FuZG8gZGFkb3MgZG8gYWdlbnRlLi4uPC9wPgogICAgICAgIDwvZGl2PgogICAgICA8Lz4KICAgICk7CiAgfQoKICByZXR1cm4gKAogICAgPD4KICAgICAgPFBhZ2VIZWFkZXIgdGl0bGU9IkVkaXRhciBBZ2VudGUgZGUgSUEiIGJhY2tCdXR0b249e2JhY2tCdXR0b259IC8+CgogICAgICA8ZGl2IGNsYXNzTmFtZT0ibWF3LXc3eGwgbXgtYXV0byBweC00IHNtOnB4NiBsZzpweC04IHBiLTIwIHJlbGF0aXZlIHoxMCI+CiAgICAgICAgPFdpemFyZFN0ZXBzCiAgICAgICAgICBjdXJyZW50U3RlcD17Y3VycmVudFN0ZXB9CiAgICAgICAgICBzdGVwcz17V0laQVJEX1NURVBTfQogICAgICAgICAgb25TdGVwQ2xpY2s9e2hhbmRsZVN0ZXBDbGlja30KICAgICAgICAvPgoKICAgICAgICA8ZGl2IGNsYXNzTmFtZT0icmVsYXRpdmUgejIwIj4KICAgICAgICAgIHtjdXJyZW50U3RlcCA9PT0gMSAmJiAoCiAgICAgICAgICAgIDxTdGVwMUJhc2ljIGRhdGE9e2Zvcm1EYXRhfSBvbkNoYW5nZT17aGFuZGxlRmllbGRDaGFuZ2V9IC8+CiAgICAgICAgICApfQoKICAgICAgICAgIHtjdXJyZW50U3RlcCA9PT0gMiAmJiAoCiAgICAgICAgICAgIDxTdGVwMlBlcnNvbmFsaXR5IGRhdGE9e2Zvcm1EYXRhfSBvbkNoYW5nZT17aGFuZGxlRmllbGRDaGFuZ2V9IGFnZW50SWQ9e2lkfSAvPgogICAgICAgICAgKX0KCiAgICAgICAgICB7Y3VycmVudFN0ZXAgPT09IDMgJiYgKAogICAgICAgICAgICA8U3RlcDNLbm93bGVkZ2UgZGF0YT17Zm9ybURhdGF9IG9uQ2hhbmdlPXtoYW5kbGVGaWVsZENoYW5nZX0gYWdlbnRJZD17aWR9IC8+CiAgICAgICAgICApfQoKICAgICAgICAgIHsvKiBOYXZpZ2F0aW9uIEJ1dHRvbnMgLSBMb2dvIGFww7NzIG9zIGNhcmRzICovfQogICAgICAgICAgPGRpdiBjbGFzc05hbWU9ImZsZXgganVzdGlmeS1iZXR3ZWVuIGl0ZW1zLWNlbnRlciBtdC02IHJlbGF0aXZlIHozMCBtYXgtdzR4bCBteC1hdXRvIj4KICAgICAgICAgIHtjdXJyZW50U3RlcCA+IDEgPyAoCiAgICAgICAgICAgIDxCdXR0b24KICAgICAgICAgICAgICB2YXJpYW50PSJnaG9zdCIKICAgICAgICAgICAgICBvbkNsaWNrPXtoYW5kbGVQcmV2aW91c30KICAgICAgICAgICAgICBjbGFzc05hbWU9Img0IHB4NCB0ZXh0LWdyYXktNzAwIGhvdmVyOmJnLXdoaXRlLzIwIHJvdW5kZWQtbGcgZm9udC1tZWRpdW0gdHJhbnNpdGlvbi1hbGwiCiAgICAgICAgICAgID4KICAgICAgICAgICAgICA8QXJyb3dMZWZ0IGNsYXNzTmFtZT0iaDQgdzQgbXIyIiAvPgogICAgICAgICAgICAgIEFudGVyaW9yCiAgICAgICAgICAgIDwvQnV0dG9uPgogICAgICAgICAgKSA6ICgKICAgICAgICAgICAgPGRpdiAvPgogICAgICAgICAgKX0KCiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0iZmxleCBnYXAzIj4KICAgICAgICAgICAgey8qIEJvdMOjbyBTYWx2YXIgLSBwcmVzZW50ZSBlbSB0b2RhcyBhcyBldGFwYXMgKi99CiAgICAgICAgICAgIDxCdXR0b24KICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBoYW5kbGVTYXZlKGZhbHNlKX0KICAgICAgICAgICAgICBkaXNhYmxlZD17aXNTYXZpbmcgfHwgIWZvcm1EYXRhLm5hbWV9CiAgICAgICAgICAgICAgY2xhc3NOYW1lPSJoMTAgcHg2IGJnLXdoaXRlLzIwIGhvdmVyOmJnLXdoaXRlLzMwIGJvcmRlciBib3JkZXItd2hpdGUvNDAgdGV4dC1ncmF5LTkwMCBmb250LW1lZGl1bSByb3VuZGVkLWxnIHRyYW5zaXRpb24tYWxsIGRpc2FibGVkOm9wYWNpdHk1MCBkaXNhYmxlZDpjdXJzb3Itbm90LWFsbG93ZWQiCiAgICAgICAgICAgID4KICAgICAgICAgICAgICA8U2F2ZSBjbGFzc05hbWU9Img0IHc0IG1yMiIgLz4KICAgICAgICAgICAgICB7aXNTYXZpbmcgPyAiU2FsdmFuZG8uLi4iIDogIlNhbHZhciJ9CiAgICAgICAgICAgIDwvQnV0dG9uPgoKICAgICAgICAgICAge2N1cnJlbnRTdGVwIDwgMyA/ICgKICAgICAgICAgICAgICA8QnV0dG9uCiAgICAgICAgICAgICAgICBvbkNsaWNrPXtoYW5kbGVOZXh0fQogICAgICAgICAgICAgICAgY2xhc3NOYW1lPSJoMTAgcHg2IGJnLXdoaXRlLzQwIGJhY2tkcm9wLWJsdXItc20gYm9yZGVyIGJvcmRlci13aGl0ZS81MCBob3ZlcjpiZy13aGl0ZS82MCB0ZXh0LWdyYXktOTAwIGZvbnQtbWVkaXVtIHJvdW5kZWQtbGcgdHJhbnNpdGlvbi1hbGwiCiAgICAgICAgICAgICAgPgogICAgICAgICAgICAgICAgUHLDs3hpbW8KICAgICAgICAgICAgICAgIDxBcnJvd1JpZ2h0IGNsYXNzTmFtZT0iaDQgdzQgbWwyIiAvPgogICAgICAgICAgICAgIDwvQnV0dG9uPgogICAgICAgICAgICApIDogKAogICAgICAgICAgICAgIDxCdXR0b24KICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IGhhbmRsZVNhdmUodHJ1ZSl9CiAgICAgICAgICAgICAgICBkaXNhYmxlZD17aXNTYXZpbmcgfHwgIWZvcm1EYXRhLm5hbWV9CiAgICAgICAgICAgICAgICBjbGFzc05hbWU9ImgxMCBweDYgYmctd2hpdGUvNDAgYmFja2Ryb3AtYmx1ci1zbSBib3JkZXIgYm9yZGVyLXdoaXRlLzUwIGhvdmVyOmJnLXdoaXRlLzYwIHRleHQtZ3JheS05MDAgZm9udC1tZWRpdW0gcm91bmRlZC1sZyB0cmFuc2l0aW9uLWFsbCBkaXNhYmxlZDpvcGFjaXR5NTAgZGlzYWJsZWQ6Y3Vyc29yLW5vdC1hbGxvd2VkIgogICAgICAgICAgICAgID4KICAgICAgICAgICAgICAgIDxTYXZlIGNsYXNzTmFtZT0iaDQgdzQgbXIyIiAvPgogICAgICAgICAgICAgICAgU2FsdmFyIGUgU2FpcgogICAgICAgICAgICAgIDwvQnV0dG9uPgogICAgICAgICAgICApfQogICAgICAgICAgPC9kaXY+CiAgICAgICAgICA8L2Rpdj4KICAgICAgICA8L2Rpdj4KICAgICAgPC9kaXY+CgogICAgICB7LyogTW9kYWwgZGUgY29uZmlybWHDp8OjbyBhbyBzYWlyICovfQogICAgICA8QWxlcnREaWFsb2cgb3Blbj17c2hvd0V4aXREaWFsb2d9IG9uT3BlbkNoYW5nZT17c2V0U2hvd0V4aXREaWFsb2d9PgogICAgICAgIDxBbGVydERpYWxvZ0NvbnRlbnQ+CiAgICAgICAgICA8QWxlcnREaWFsb2dIZWFkZXI+CiAgICAgICAgICAgIDxBbGVydERpYWxvZ1RpdGxlPlZvY8OqIHRlbSBhbHRlcmHDp8O1ZXMgbsOjbyBzYWx2YXM8L0FsZXJ0RGlhbG9nVGl0bGU+CiAgICAgICAgICAgIDxBbGVydERpYWxvZ0Rlc2NyaXB0aW9uPgogICAgICAgICAgICAgIERlc2VqYSBzYWx2YXIgYXMgYWx0ZXJhw6fDtWVzIGFudGVzIGRlIHNhaXI/CiAgICAgICAgICAgIDwvQWxlcnREaWFsb2dEZXNjcmlwdGlvbj4KICAgICAgICAgIDwvQWxlcnREaWFsb2dIZWFkZXI+CiAgICAgICAgICA8QWxlcnREaWFsb2dGb290ZXI+CiAgICAgICAgICAgIDxBbGVydERpYWxvZ0NhbmNlbCBvbkNsaWNrPXtoYW5kbGVFeGl0V2l0aG91dFNhdmluZ30+CiAgICAgICAgICAgICAgU2FpciBzZW0gc2FsdmFyCiAgICAgICAgICAgIDwvQWxlcnREaWFsb2dDYW5jZWw+CiAgICAgICAgICAgIDxBbGVydERpYWxvZ0FjdGlvbiBvbkNsaWNrPXtoYW5kbGVTYXZlQW5kRXhpdH0+CiAgICAgICAgICAgICAgU2FsdmFyIGUgU2FpcgogICAgICAgICAgICA8L0FsZXJ0RGlhbG9nQWN0aW9uPgogICAgICAgICAgPC9BbGVydERpYWxvZ0Zvb3Rlcj4KICAgICAgICA8L0FsZXJ0RGlhbG9nQ29udGVudD4KICAgICAgPC9BbGVydERpYWxvZz4KICAgIDwvPgogICk7Cn0K'', ''base64''))\")",
      "Bash(npx supabase secrets:*)"
    ],
    "deny": [],
    "ask": []
  }
}