/* Safari & WebKit Specific Fixes - TODAS VERSÕES MACOS */

/* IMPORTANTE: Aplica fixes para TODOS os Macs (antigos e novos) */
/* Classes aplicadas via JavaScript para detecção precisa */

/* === DEBUG: Log das classes aplicadas === */
/* As seguintes classes são aplicadas pelo safari-detector.ts:
   - body.macos-system: Detectado como macOS
   - body.safari-browser: Detectado como Safari
   - body.webkit-browser: Detectado como WebKit (Chrome, Safari, etc)
   - body.ios-system: Detectado como iOS
   - body.no-backdrop-support: backdrop-filter não suportado
   - body.backdrop-render-fail: backdrop-filter aceito mas não renderiza
   - body.macos-backdrop-issues: macOS com problemas conhecidos
   - body.safari-modal-issues: Safari com problemas em modais
*/

/* === RENDERING OPTIMIZATION PARA SAFARI/MACOS === */
/* IMPORTANTE: NÃO alteramos backdrop-filter ou background-color */
/* Deixamos o Tailwind CSS aplicar os valores padrão naturalmente */
/* Apenas otimizamos o rendering para melhor performance */

body.safari-browser [class*="backdrop-blur"],
body.macos-system [class*="backdrop-blur"],
body.webkit-browser [class*="backdrop-blur"] {
  /* Força compositing layer para melhor renderização */
  -webkit-transform: translateZ(0);
  transform: translateZ(0);
  will-change: transform;
  /* Otimização de rendering sem alterar visual */
  -webkit-backface-visibility: hidden;
  backface-visibility: hidden;
}

/* Fallback APENAS quando backdrop-filter falha completamente */
body.safari-browser.no-backdrop-support [class*="backdrop-blur"],
body.safari-browser.backdrop-render-fail [class*="backdrop-blur"] {
  backdrop-filter: none !important;
  -webkit-backdrop-filter: none !important;
  /* Aumenta opacidade apenas quando backdrop não funciona */
  background-color: rgba(255, 255, 255, 0.98) !important;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
}

/* === MODAIS FIXES PARA SAFARI/MACOS === */
/* IMPORTANTE: Apenas otimizações de rendering */
/* NÃO alteramos tamanhos ou posicionamentos definidos pelo Tailwind */

/* Otimização de rendering para modais centralizados */
body.safari-browser [data-radix-dialog-content],
body.macos-system [data-radix-dialog-content] {
  /* Força compositing layer para melhor renderização */
  -webkit-transform: translateZ(0);
  transform: translateZ(0);
  will-change: transform;
  /* Garante que o posicionamento funcione corretamente */
  -webkit-backface-visibility: hidden;
  backface-visibility: hidden;
}

/* Otimização para overlay de modais */
body.safari-browser [data-radix-dialog-overlay],
body.macos-system [data-radix-dialog-overlay] {
  /* Força compositing layer */
  -webkit-transform: translateZ(0);
  transform: translateZ(0);
  will-change: transform;
}

/* === RENDERING OPTIMIZATION PARA SHADOWS === */
body.safari-browser .shadow-glass,
body.macos-system .shadow-glass,
body.safari-browser .shadow-glass-lg,
body.macos-system .shadow-glass-lg {
  /* Força compositing layer para melhor renderização de sombras */
  -webkit-transform: translateZ(0);
  transform: translateZ(0);
  will-change: transform;
}